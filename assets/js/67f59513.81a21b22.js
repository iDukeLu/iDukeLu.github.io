"use strict";(self.webpackChunki_duke_lu_github_io=self.webpackChunki_duke_lu_github_io||[]).push([[9877],{1759:(n,l,e)=>{e.r(l),e.d(l,{assets:()=>t,contentTitle:()=>d,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var s=e(5893),r=e(1151);const i={title:"MySQL 8.0 \u5b89\u88c5\uff08CentOS 7\uff09",authors:"Duke Lu",date:new Date("2018-04-08T00:00:00.000Z"),tags:["markdown"]},d=void 0,o={permalink:"/blog/2018/mysql-install-centos7",source:"@site/blog/2018/mysql-install-centos7.md",title:"MySQL 8.0 \u5b89\u88c5\uff08CentOS 7\uff09",description:"\u4e0b\u8f7d MySQL \u538b\u7f29\u5305\u5e76\u4e0a\u4f20\u670d\u52a1\u5668",date:"2018-04-08T00:00:00.000Z",formattedDate:"2018\u5e744\u67088\u65e5",tags:[{label:"markdown",permalink:"/blog/tags/markdown"}],readingTime:2.95,hasTruncateMarker:!1,authors:[{name:"Duke Lu",title:"Golang Development Engineer",url:"https://github.com/idukelu",imageURL:"https://github.com/idukelu.png",key:"Duke Lu"}],frontMatter:{title:"MySQL 8.0 \u5b89\u88c5\uff08CentOS 7\uff09",authors:"Duke Lu",date:"2018-04-08T00:00:00.000Z",tags:["markdown"]},unlisted:!1,prevItem:{title:"\u8fde\u63a5 MySQL \u62a5\u9519\uff1a2059 - authentication plugin 'caching_sha2_password' cannot be loaded...",permalink:"/blog/2018/mysql-connection-error"},nextItem:{title:"\u5e38\u7528\u53c2\u8003\u6587\u6863",permalink:"/blog/2018/reference-documentation"}},t={authorsImageUrls:[void 0]},c=[{value:"\u4e0b\u8f7d MySQL \u538b\u7f29\u5305\u5e76\u4e0a\u4f20\u670d\u52a1\u5668",id:"\u4e0b\u8f7d-mysql-\u538b\u7f29\u5305\u5e76\u4e0a\u4f20\u670d\u52a1\u5668",level:2},{value:"\u5b89\u88c5 MySQL",id:"\u5b89\u88c5-mysql",level:2},{value:"\u5bf9 MySQL \u8fdb\u884c\u521d\u59cb\u914d\u7f6e",id:"\u5bf9-mysql-\u8fdb\u884c\u521d\u59cb\u914d\u7f6e",level:2},{value:"\u9632\u706b\u5899\u8bbe\u7f6e",id:"\u9632\u706b\u5899\u8bbe\u7f6e",level:2}];function a(n){const l={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.h2,{id:"\u4e0b\u8f7d-mysql-\u538b\u7f29\u5305\u5e76\u4e0a\u4f20\u670d\u52a1\u5668",children:"\u4e0b\u8f7d MySQL \u538b\u7f29\u5305\u5e76\u4e0a\u4f20\u670d\u52a1\u5668"}),"\n",(0,s.jsxs)(l.p,{children:["\u4e0b\u8f7d\u5730\u5740\uff1a",(0,s.jsx)(l.a,{href:"https://dev.mysql.com/downloads/mysql/",children:"MySQL :: Download MySQL Community Server"})]}),"\n",(0,s.jsx)(l.h2,{id:"\u5b89\u88c5-mysql",children:"\u5b89\u88c5 MySQL"}),"\n",(0,s.jsxs)(l.ol,{children:["\n",(0,s.jsx)(l.li,{children:"\u4e3a\u7cfb\u7edf\u521b\u5efa MySQL \u7528\u6237\u7ec4"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"groupadd mysql\nuseradd -r -g mysql -s /bin/false mysql\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"2",children:["\n",(0,s.jsx)(l.li,{children:"\u521b\u5efa MySQL \u5b89\u88c5\u76ee\u5f55\u3001\u6570\u636e\u76ee\u5f55"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"mkdir -p /usr/local/mysql\nmkdir -p /usr/local/mysql/data\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"3",children:["\n",(0,s.jsx)(l.li,{children:"\u89e3\u538b MySQL \u538b\u7f29\u5305\u81f3\u5b89\u88c5\u76ee\u5f55"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"tar -xvf mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz -C /usr/local/mysql --strip-components 1\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"4",children:["\n",(0,s.jsx)(l.li,{children:"\u8fdb\u5165 MySQL \u5b89\u88c5\u76ee\u5f55\uff0c\u521d\u59cb\u5316 MySQL \uff08\u8bbe\u7f6e user\u3001basedir\u3001datadir\uff09"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"cd /usr/local/mysql \n./bin/mysqld --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --initialize\n"})}),"\n",(0,s.jsx)(l.p,{children:"\u6ce8\u610f\uff1a\u521d\u59cb\u5316\u540e\uff0c\u8bb0\u5f97\u8bb0\u5f55 MySQL \u7684\u521d\u59cb\u5bc6\u7801"}),"\n",(0,s.jsxs)(l.ol,{start:"5",children:["\n",(0,s.jsx)(l.li,{children:"\u521b\u5efa MySQL \u547d\u4ee4\u8f6f\u94fe\u63a5"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"6",children:["\n",(0,s.jsx)(l.li,{children:"\u4fee\u6539\u76f8\u5173\u914d\u7f6e\u6587\u4ef6"}),"\n"]}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:["\u4fee\u6539 ",(0,s.jsx)(l.code,{children:"/etc/my.conf"})," \u914d\u7f6e\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"[mysqld]\nbasedir=/usr/local/mysql\ndatadir=/usr/local/mysql/data\nsocket=/var/lib/mysql/mysql.sock\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n# Settings user and group are ignored when systemd is used.\n# If you need to run mysqld under a different user or group,\n# customize your systemd unit file for mariadb according to the\n# instructions in http://fedoraproject.org/wiki/Systemd\n\n\n[mysqld_safe]\nlog-error=/var/log/mysql/mysql.log\npid-file=/var/run/mysql/mysql.pid\n\n\n#\n# include all files from the config directory\n#\n!includedir /etc/my.cnf.d\n"})}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsxs)(l.li,{children:["\u62f7\u8d1d\u5e76\u4fee\u6539 ",(0,s.jsx)(l.code,{children:"/etc/init.d/mysqld"})," \u6587\u4ef6"]}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld\n"})}),"\n",(0,s.jsx)(l.p,{children:"\u4fee\u6539\u4ee5\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"basedir=/usr/local/mysql\ndatadir=/usr/local/mysql/data\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"7",children:["\n",(0,s.jsx)(l.li,{children:"\u521b\u5efa MySQL \u65e5\u5fd7\u6587\u4ef6\u3001\u8fdb\u7a0b\u6587\u4ef6\uff0c\u5e76\u8fdb\u884c\u76f8\u5173\u8d4b\u6743\n\u521b\u5efa /var/log/mysql/mysql.log \u3001 /var/run/mysql/mysql.pid"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"mkdir -p /var/log/mysql\nmkdir -p /var/run/mysql\ntouch /var/log/mysql/mysql.log\ntouch /var/run/mysql/mysql.pid\n\nchown -R mysql:mysql /var/log/mysql\nchown -R mysql:mysql /var/run/mysql\nchmod 750 /var/log/mysql/mysql.log\nchmod 750 /var/run/mysql/mysql.pid\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"8",children:["\n",(0,s.jsx)(l.li,{children:"\u4e3a mysql.sock \u6587\u4ef6\u521b\u5efa\u8f6f\u94fe\u63a5\uff0c\u5e76\u4e3a\u76f8\u5e94\u6587\u4ef6\u5939\u8d4b\u6743"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"chown -R mysql:mysql /var/lib/mysql\nln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock\n"})}),"\n",(0,s.jsx)(l.p,{children:"\u5230\u8fd9\u91cc\uff0cMySQL \u7684\u5b89\u88c5\u5c31\u5b8c\u6210\u4e86\uff0c\u53ef\u4ee5\u542f\u52a8 MySQL \u4e86\uff0c\u76f8\u5173\u547d\u4ee4\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"service mysqld start --\u542f\u52a8mysql\nservice mysqld stop --\u5173\u95edmysql\nservice mysqld restart --\u91cd\u542fmysql\n"})}),"\n",(0,s.jsx)(l.h2,{id:"\u5bf9-mysql-\u8fdb\u884c\u521d\u59cb\u914d\u7f6e",children:"\u5bf9 MySQL \u8fdb\u884c\u521d\u59cb\u914d\u7f6e"}),"\n",(0,s.jsxs)(l.ol,{children:["\n",(0,s.jsx)(l.li,{children:"\u767b\u9646 mysql\uff0c\u7528\u5230\u521d\u59cb\u5316\u65f6\u8bb0\u5f55\u7684\u5bc6\u7801"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"mysql -uroot -p\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"2",children:["\n",(0,s.jsx)(l.li,{children:"\u4fee\u6539 root \u7528\u6237\u5bc6\u7801\u4e3a\uff1a root"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"3",children:["\n",(0,s.jsx)(l.li,{children:"\u5f00\u542f\u8fdc\u7a0b\u8bbf\u95ee"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"GRANT ALL ON *.* TO 'root'@'%';\n"})}),"\n",(0,s.jsx)(l.p,{children:"\u62a5\u9519\uff1a\u521b\u5efa\u4e00\u4e2a root \u7528\u6237\uff0c\u5e76\u5f00\u542f\u8fdc\u7a0b\u8bbf\u95ee"}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"CREATE USER 'root'@'%' IDENTIFIED BY 'root'; --\u521b\u5efaroot\u7528\u6237\uff0chost\u4e3a%\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;\n"})}),"\n",(0,s.jsx)(l.p,{children:"\u5c06\u521a\u521a\u521b\u5efa\u7684 root \u7528\u6237\uff0c\u5bc6\u7801\u4fee\u6539\u4e3a\uff1aroot"}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';\n"})}),"\n",(0,s.jsxs)(l.ol,{start:"4",children:["\n",(0,s.jsx)(l.li,{children:"\u5237\u65b0\u6743\u9650"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"FLUSH PRIVILEGES;\n"})}),"\n",(0,s.jsx)(l.h2,{id:"\u9632\u706b\u5899\u8bbe\u7f6e",children:"\u9632\u706b\u5899\u8bbe\u7f6e"}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsx)(l.li,{children:"\u5185\u7f51\u73af\u5883\uff0c\u53ef\u4ee5\u76f4\u63a5\u8003\u8651\u5173\u95ed\u9632\u706b\u5899"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"systemctl stop firewalld.service --\u5173\u95ed\u9632\u706b\u5899\n"})}),"\n",(0,s.jsxs)(l.ul,{children:["\n",(0,s.jsx)(l.li,{children:"\u5916\u7f51\u73af\u5883\uff0c\u5efa\u8bae\u5f00\u542f 3306 \u7aef\u53e3\u5373\u53ef"}),"\n"]}),"\n",(0,s.jsx)(l.pre,{children:(0,s.jsx)(l.code,{children:"firewall-cmd \u2014zone=public \u2014add-port=3306/tcp \u2014permanent -\u2014\u6dfb\u52a03306\u7aef\u53e3\nfirewall-cmd \u2014reload --\u91cd\u542f\u9632\u706b\u5899\u89c4\u5219\n"})}),"\n",(0,s.jsx)(l.hr,{}),"\n",(0,s.jsxs)(l.p,{children:["\u53c2\u8003\uff1a",(0,s.jsx)(l.a,{href:"https://blog.csdn.net/baidu_27055141/article/details/80974701",children:"Centos7\u5b89\u88c5Mysql8.0.11 - baidu_27055141\u7684\u535a\u5ba2 - CSDN\u535a\u5ba2"})]})]})}function m(n={}){const{wrapper:l}={...(0,r.a)(),...n.components};return l?(0,s.jsx)(l,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},1151:(n,l,e)=>{e.d(l,{Z:()=>o,a:()=>d});var s=e(7294);const r={},i=s.createContext(r);function d(n){const l=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(l):{...l,...n}}),[l,n])}function o(n){let l;return l=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),s.createElement(i.Provider,{value:l},n.children)}}}]);