<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>黄昏别馆 Blog</title>
        <link>https://idukelu.com/blog</link>
        <description>黄昏别馆 Blog</description>
        <lastBuildDate>Sat, 28 Apr 2018 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-Hans</language>
        <item>
            <title><![CDATA[Java 虚拟机运行时的数据区域（简单理解）]]></title>
            <link>https://idukelu.com/blog/2018/jvm-data-area</link>
            <guid>https://idukelu.com/blog/2018/jvm-data-area</guid>
            <pubDate>Sat, 28 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Java 虚拟机运行时的数据区域图示]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-虚拟机运行时的数据区域图示">Java 虚拟机运行时的数据区域图示<a href="https://idukelu.com/blog/2018/jvm-data-area#java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F%E5%9B%BE%E7%A4%BA" class="hash-link" aria-label="Java 虚拟机运行时的数据区域图示的直接链接" title="Java 虚拟机运行时的数据区域图示的直接链接">​</a></h2>
<p><img loading="lazy" src="https://upload-images.jianshu.io/upload_images/12158715-2d7103aacd2e8185.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Java 虚拟机运行时的数据区域" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="程序计数器program-counter-register">程序计数器（Program Counter Register）<a href="https://idukelu.com/blog/2018/jvm-data-area#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8program-counter-register" class="hash-link" aria-label="程序计数器（Program Counter Register）的直接链接" title="程序计数器（Program Counter Register）的直接链接">​</a></h2>
<p><strong>简单理解：线程私有、行号指示器</strong></p>
<p><strong>程序计数器</strong>：是一小块内存区域，它可以看作是当前线程所执行字节码的行号指示器。
字节码解释器工作时，就是通过改变程序计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都要依赖程序计数器来完成。</p>
<ul>
<li>
<p>记录的内容
执行一个 Java 方法：记录的是，正在执行的虚拟机字节码指令的地址
执行一个 Native 方法：计数器的值为空</p>
</li>
<li>
<p>异常
唯一一个在 Java 虚拟机规范中没有规定任何 <code>OutOfMemoryError</code> 情况的区域</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-虚拟机栈java-virtual-machine-stacks">Java 虚拟机栈（Java Virtual Machine Stacks）<a href="https://idukelu.com/blog/2018/jvm-data-area#java-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88java-virtual-machine-stacks" class="hash-link" aria-label="Java 虚拟机栈（Java Virtual Machine Stacks）的直接链接" title="Java 虚拟机栈（Java Virtual Machine Stacks）的直接链接">​</a></h2>
<p><strong>简单理解：线程私有、描述 Java 方法执行过程</strong></p>
<p><strong>虚拟机栈</strong>：描述 Java 方法执行的内存模型。它的生命周期同线程。
每个方法执行的时候都会创建一个栈桢，每个方法的调用直至执行完成，就对应一个栈桢在虚拟机栈中入栈到出栈道过程</p>
<ul>
<li>
<p>栈桢（Stack Frame）：存储局部变量表、操作数栈、动态链表、方法出口等信息</p>
</li>
<li>
<p>局部变量表：存放编译期可知的各种基本数据类型、对象引用、returnAddress类型</p>
</li>
<li>
<p>异常
<code>StackOverflowError</code>：线程请求的栈深度大于虚拟机允许的深度时，抛出
<code>OutOfMemoryError</code>：虚拟机栈动态扩展时无法申请到足够内存时，抛出</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="本地方法栈native-method-stack">本地方法栈（Native Method Stack）<a href="https://idukelu.com/blog/2018/jvm-data-area#%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88native-method-stack" class="hash-link" aria-label="本地方法栈（Native Method Stack）的直接链接" title="本地方法栈（Native Method Stack）的直接链接">​</a></h2>
<p><strong>简单理解：线程私有、描述 Native 方法执行过程</strong></p>
<p><strong>本地方法栈</strong>：与 Java 虚拟机栈发挥到作用非常相似。
虚拟机栈：为虚拟机执行 Java 方法服务；本地方法栈：为虚拟机执行 Native 方法服务</p>
<ul>
<li>异常
<code>StackOverflowError</code>：线程请求的栈深度大于虚拟机允许的深度时，抛出
<code>OutOfMemoryError</code>：虚拟机栈动态扩展时无法申请到足够内存时，抛出</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-堆java-heap">Java 堆（Java Heap）<a href="https://idukelu.com/blog/2018/jvm-data-area#java-%E5%A0%86java-heap" class="hash-link" aria-label="Java 堆（Java Heap）的直接链接" title="Java 堆（Java Heap）的直接链接">​</a></h2>
<p><strong>简单理解：线程共享、存放对象实例</strong></p>
<p><strong>Java 堆</strong>：被所有线程共享的一块内存区域，在虚拟机启动时创建。
Java 堆内存区域的唯一目的就是：存放对象实例（但，对象实例都分配在堆上，不是绝对的）
Java 堆是垃圾收集器管理的主要区域，很多时候也被称为“GC堆（Garbage Collected Heap）”
根据 Java 虚拟机规范规定：Java 堆可以处于物理上不连续的内存空间中，只要逻辑上连续即可</p>
<ul>
<li>堆内存划分
分代收集法的角度：
新生代、老年代（细致一点：Eden 空间、From Survivor空间、To Survivor空间等）</li>
</ul>
<p>内存分配的角度：
线程共享的 Java 堆可能划分出多个线程私有的分配缓冲区（Thread Local Allocation Buffer，TLAB）</p>
<ul>
<li>异常
<code>OutOfMemoryError</code>：堆中没有内存完成实例分配，并且堆也无法再扩展时，抛出</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="方法区method-area">方法区（Method Area）<a href="https://idukelu.com/blog/2018/jvm-data-area#%E6%96%B9%E6%B3%95%E5%8C%BAmethod-area" class="hash-link" aria-label="方法区（Method Area）的直接链接" title="方法区（Method Area）的直接链接">​</a></h2>
<p><strong>简单理解：线程共享、存放对象实例以外的数据</strong></p>
<p><strong>方法区</strong>：与 Java 堆一样，被所有线程共享的一块内存区域。
方法区用于存储：已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据
类信息：存储类名、访问修饰符、常量池、字段描述、方法描述等
习惯在 HotSpot 虚拟机上开发、部署的开发者，更愿意将方法区称为“永久代（Permanent Generation）”</p>
<ul>
<li>
<p>垃圾回收的目标
对常量池的回收、对类型的卸载</p>
</li>
<li>
<p>异常
<code>OutOfMemoryError</code>：方法区无法满足内存分配时，抛出</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="运行时常量池runtime-constant-pool-table">运行时常量池（Runtime Constant Pool Table）<a href="https://idukelu.com/blog/2018/jvm-data-area#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0runtime-constant-pool-table" class="hash-link" aria-label="运行时常量池（Runtime Constant Pool Table）的直接链接" title="运行时常量池（Runtime Constant Pool Table）的直接链接">​</a></h4>
<p><strong>简单理解：线程共享、存放字面量、符号引用、直接引用</strong></p>
<p><strong>运行时常量池</strong>：方法区的一部分。
Class 文件除了有类的版本、字段、方法、接口等描述信息；还有一项信息，便是常量池，用于存放编译期生成的各种字面量和字符引用，这部分内容（常量池）将在类加载后进入方法区的运行时常量池中存放。
不过，一般来说，除了保存 Class 文件中描述的符号引用外，还会把翻译出来的直接引用也存储在运行时常量池中。</p>
<ul>
<li>
<p>动态性
Java 语言并不要求常量一定只在编译期产生，运行期间也可能将新的常量放入池中。（比如：String 的 intern() 方法）</p>
</li>
<li>
<p>异常
<code>OutOfMemoryError</code>：常量池无法再申请到内存时，抛出</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="直接内存direct-memory">直接内存（Direct Memory）<a href="https://idukelu.com/blog/2018/jvm-data-area#%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98direct-memory" class="hash-link" aria-label="直接内存（Direct Memory）的直接链接" title="直接��内存（Direct Memory）的直接链接">​</a></h2>
<p><strong>直接内存</strong>：这块内存区域，不是虚拟机运行时的数据区域的一部分，也不是 Java 虚拟机规范中定义的内存区域。
Nio 操作时，为提高效率，避免在 Java 堆和 Native 堆中来回复制数据，运行直接操作堆外内，即直接内存。</p>
<ul>
<li>异常
<code>OutOfMemoryError</code>：虚拟机设置的内存大于物理内存限制，虚拟机内存动态扩展时无法达到设置值时，抛出</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结一下">总结一下<a href="https://idukelu.com/blog/2018/jvm-data-area#%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B" class="hash-link" aria-label="总结一下的直接链接" title="总结一下的直接链接">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="概念及要点">概念及要点<a href="https://idukelu.com/blog/2018/jvm-data-area#%E6%A6%82%E5%BF%B5%E5%8F%8A%E8%A6%81%E7%82%B9" class="hash-link" aria-label="概念及要点的直接链接" title="概念及要点的直接链接">​</a></h4>
<ul>
<li>
<p>程序计数器：字节码的行号指示器
Java 方法：记录字节码指令的地址
Native 方法：记录值为空</p>
</li>
<li>
<p>虚拟机栈：Java 方法调用的内存模型
存放<strong>栈桢</strong>；栈桢相当于是对方法的描述
栈桢：存储局部变量表、操作数栈、动态链表、方法出口等信息
局部变量表：存放编译期可知的各种基本数据类型、对象引用、returnAddress类型</p>
</li>
<li>
<p>本地方法栈：Native 方法调用的内存模型</p>
</li>
<li>
<p>堆：存储对象实例的内存空间
存放<strong>实例对象</strong>；物理地址可以不连续
堆内存划分：新生代、老年代（Eden 空间、From Survivor空间、To Survivor空间）；本地线程分配缓冲</p>
</li>
<li>
<p>方法区：存储对象实例以外数据的内存空间
存储已被虚拟机加载的<strong>类信息</strong>、<strong>常量</strong>、<strong>静态变量</strong>、<strong>即时编译器编译后的代码</strong>等数据
类信息：存储类名、访问修饰符、常量池、字段描述、方法描述等
运行时常量池：存放 Class 文件中的常量池（包含：字面量、符号引用）、直接引用；具有动态性</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="同步策略">同步策略<a href="https://idukelu.com/blog/2018/jvm-data-area#%E5%90%8C%E6%AD%A5%E7%AD%96%E7%95%A5" class="hash-link" aria-label="同步策略的直接链接" title="同步策略的直接链接">​</a></h4>
<ul>
<li>线程私有：程序计数器、虚拟机栈、本地方法栈</li>
<li>线程共享：堆、方法区</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="异常">异常<a href="https://idukelu.com/blog/2018/jvm-data-area#%E5%BC%82%E5%B8%B8" class="hash-link" aria-label="异常的直接链接" title="异常的直接链接">​</a></h4>
<ul>
<li>程序计数器：无异常</li>
<li>虚拟机栈：<code>StackOverflowError</code>、<code>OutOfMemoryError</code></li>
<li>本地方法栈：<code>StackOverflowError</code>、<code>OutOfMemoryError</code></li>
<li>堆：<code>OutOfMemoryError</code></li>
<li>方法区：<code>OutOfMemoryError</code></li>
<li>直接内存：<code>OutOfMemoryError</code></li>
</ul>
<hr>
<p>参考：《深入理解Java虚拟机》</p>]]></content:encoded>
            <category>java</category>
            <category>jvm</category>
        </item>
        <item>
            <title><![CDATA[Kubernetes v1.15.0 集群的安装部署（详细版）]]></title>
            <link>https://idukelu.com/blog/2018/k8s-install-detail</link>
            <guid>https://idukelu.com/blog/2018/k8s-install-detail</guid>
            <pubDate>Sat, 28 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[软硬件要求]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="软硬件要求">软硬件要求<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E8%BD%AF%E7%A1%AC%E4%BB%B6%E8%A6%81%E6%B1%82" class="hash-link" aria-label="软硬件要求的直接链接" title="软硬件要求的直接链接">​</a></h2>
<table><thead><tr><th style="text-align:left">软硬件</th><th style="text-align:left">最低配置</th><th style="text-align:left">推荐配置</th></tr></thead><tbody><tr><td style="text-align:left">CPU 和 内存</td><td style="text-align:left">Master：至少2核4G、<br>Node：至少4核16G</td><td style="text-align:left">Master：4核16G、<br>Node：根据运行的容器数量进行配置</td></tr><tr><td style="text-align:left">Linux 操作系统</td><td style="text-align:left">基于 x86_64 架构的各种Linux 发行版，Kernel 3.10 以上</td><td style="text-align:left">Red Hat Linux 7<br>CentOS 7</td></tr><tr><td style="text-align:left">etcd</td><td style="text-align:left">3.0 版本及以上</td><td style="text-align:left">3.3 版本</td></tr><tr><td style="text-align:left">Docker</td><td style="text-align:left">18.03 版本及以上</td><td style="text-align:left">18.09 版本</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="机器准备">机器准备<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E6%9C%BA%E5%99%A8%E5%87%86%E5%A4%87" class="hash-link" aria-label="机器准备的直接链接" title="机器准备的直接链接">​</a></h2>
<table><thead><tr><th style="text-align:left">角色</th><th style="text-align:left">主机名称</th><th style="text-align:left">内网 IP</th><th style="text-align:left">配置</th><th style="text-align:left">系统</th></tr></thead><tbody><tr><td style="text-align:left">Master</td><td style="text-align:left">KubernetesMaster</td><td style="text-align:left">192.168.0.123</td><td style="text-align:left">2 核 4 G</td><td style="text-align:left">CentOS 7.6.5</td></tr><tr><td style="text-align:left">Node</td><td style="text-align:left">KubernetesNode1</td><td style="text-align:left">192.168.0.122</td><td style="text-align:left">2 核 4 G</td><td style="text-align:left">CentOS 7.6.5</td></tr><tr><td style="text-align:left">Node</td><td style="text-align:left">KubernetesNode2</td><td style="text-align:left">192.168.0.121</td><td style="text-align:left">2 核 4 G</td><td style="text-align:left">CentOS 7.6.5</td></tr><tr><td style="text-align:left">注：这里只是做环境测试，故只满足了官方要求的最低 2 核 2 G</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署步骤说明">部署步骤说明<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4%E8%AF%B4%E6%98%8E" class="hash-link" aria-label="部署步骤说明的直接链接" title="部署步骤说明的直接链接">​</a></h2>
<p>使用 kubeadm 部署 kubernetes 主要有以下四个步骤：</p>
<blockquote>
<ol>
<li>安装 Docker （所有主机）</li>
<li>安装 Kubeadm（所有主机）</li>
<li>基础环境配置（所有主机）</li>
<li>创建 Kubernetes 集群</li>
</ol>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一-安装-docker所有主机">一. 安装 Docker（所有主机）<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E4%B8%80-%E5%AE%89%E8%A3%85-docker%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA" class="hash-link" aria-label="一. 安装 Docker（所有主机）的直接链接" title="一. 安装 Docker（所有主机）的直接链接">​</a></h2>
<p>安装 Docker 引擎，主要执行以下步骤：</p>
<blockquote>
<ol>
<li>安装 Docker 需要的一些系统工具</li>
<li>设置 Docker 的 yum 仓库源</li>
<li>安装并启动 Docker</li>
<li>调整 Docker 部分参数（主要是配合 Kubernetes 的一些配置）</li>
</ol>
</blockquote>
<ol>
<li>
<p>安装必要的一些系统工具</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>设置 Docker 的 yum 仓库源</p>
<ul>
<li>
<p>官方源（二选一）：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>阿里云源（二选一）：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo      </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>安装并启动 Docker</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y docker-ce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start docker &amp;&amp; systemctl enable docker </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>调整 Docker 部分参数
这里主要做两点调整：</p>
<ul>
<li>配置国内镜像加速（国内的各种原因，可能导致拉取镜像像蜗牛一样。。。）</li>
<li>修改 cgroup 驱动（Docker 默认使用 cgroupfs，Kubernetes 官方推荐 systemd）</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /etc/docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> "registry-mirrors": ["https://pcy9sknd.mirror.aliyuncs.com"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> "exec-opts": ["native.cgroupdriver=systemd"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload &amp;&amp; systemctl restart docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注：这里采用的是阿里云的镜像源，当然你也可以选择：中科大、网易、DaoCloud（还有个号称中国官方的源，但实测好像没什么卵用）</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二-安装-kubeadm所有主机">二. 安装 Kubeadm（所有主机）<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E4%BA%8C-%E5%AE%89%E8%A3%85-kubeadm%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA" class="hash-link" aria-label="二. 安装 Kubeadm（所有主机）的直接链接" title="二. 安装 Kubeadm（所有主机）的直接链接">​</a></h2>
<p>安装 Kubeadm 主要有以下三个步骤：</p>
<blockquote>
<ol>
<li>配置 Kubernetes 的 yum 仓库源（这里选用阿里的源，你懂的）</li>
<li>安装 Kubeadm 和相关工具</li>
<li>启动 Kubelet</li>
</ol>
</blockquote>
<ol>
<li>
<p>设置 Kubernetes 的 yum 仓库源</p>
<ul>
<li>
<p>阿里云源（推荐）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/yum.repos.d/kubernetes.repo &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repo_gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>官方源（不推荐）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/yum.repos.d/kubernetes.repo &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repo_gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exclude=kube*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>安装 Kubeadm 和相关工具</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y kubelet kubeadm kubectl --nogpgcheck</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>启动 Kubelet</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start kubelet &amp;&amp; systemctl enable kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三-基础环境配置所有主机">三. 基础环境配置（所有主机）<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E4%B8%89-%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA" class="hash-link" aria-label="三. 基础环境配置（所有主机）的直接链接" title="三. 基础环境配置（所有主机）的直接链接">​</a></h2>
<p>基础环境配置，主要执行以下步骤：</p>
<blockquote>
<ol>
<li>设置各节点时间精确同步</li>
<li>关闭 firewalld/iptables 防火墙</li>
<li>关闭 SElinux 安全模组</li>
<li>关闭 Swap 交换分区</li>
<li>导入 IPVS 模块</li>
<li>修改 Bridge 桥接规则</li>
<li>开启 iptables 的 FORWARD 转发链</li>
<li>配置 Hosts 解析</li>
</ol>
</blockquote>
<ol>
<li>
<p>设置各节点时间精确同步</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start chronyd.service &amp;&amp; systemctl enable chronyd.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>关闭 firewalld 防火墙（允许 master 和 node 的网络通信）
由于 Master 和 Node 存在大量网络交互，需对防火墙进行相关配置</p>
<ul>
<li>外网环境：在防火墙上配置各组件相互通信的端口</li>
<li>内网环境：直接关闭防火墙，减少防火墙规则的维护工作</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>关闭 SElinux 安全模组（让容器可以读取主机的文件系统）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">setenforce 0 &amp;&amp; sed -i "s/SELINUX=enforcing$/SELINUX=disabled/g" /etc/selinux/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>关闭 Swap 交换分区（启用了 Swap，则 Qos 策略可能会失效）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">swapoff -a &amp;&amp; sed -i "s/\/dev\/mapper\/centos-swap/\#\/dev\/mapper\/centos-swap/g" /etc/fstab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>导入 IPVS 模块（用来为大量服务进行负载均衡）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs_rr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs_wrr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs_sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- nf_conntrack_ipv4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>修改 Bridge 桥接规则（部分 Docker 安装时会为我们修改，这里统一进行手动修改）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.swappiness=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl --system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>开启 iptables 的 FORWARD 转发链（Docker 1.13 后禁用了 FORWARD 链，这可能会引起 Pod 间无法通信）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">iptables -P FORWARD ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -i '/ExecStart/a ExecStartPost=/sbin/iptables -P FORWARD ACCEPT' /usr/lib/systemd/system/docker.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>配置 Hosts 解析（添加 k8s 所有节点的 IP 和对应主机名，否则初始化的时候会出现告警甚至错误）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/hosts &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">::1     localhost       localhost.localdomain   localhost6      localhost6.localdomain6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">127.0.0.1       localhost       localhost.localdomain   localhost4      localhost4.localdomain4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.123 kube-master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.122 kube-node1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.121 kube-node2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>安装一些必要的工具（这些工具在以后的命令中会用到）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y ipset ipvsadm bind-utils</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="四-创建-kubernetes-集群">四. 创建 Kubernetes 集群<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E5%9B%9B-%E5%88%9B%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4" class="hash-link" aria-label="四. 创建 Kubernetes 集群的直接链接" title="四. 创建 Kubernetes 集群的直接链接">​</a></h2>
<p>创建 Kubernetes 集群主要有两个步骤：</p>
<blockquote>
<ol>
<li>初始化 Master 节点</li>
<li>初始化 Node 节点</li>
</ol>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-初始化-master-节点">1. 初始化 Master 节点<a href="https://idukelu.com/blog/2018/k8s-install-detail#1-%E5%88%9D%E5%A7%8B%E5%8C%96-master-%E8%8A%82%E7%82%B9" class="hash-link" aria-label="1. 初始化 Master 节点的直接链接" title="1. 初始化 Master 节点的直接链接">​</a></h3>
<p>初始化 Master 节点，主要有四个步骤：</p>
<blockquote>
<ol>
<li>执行初始化</li>
<li>复制(分发)配置文件</li>
<li>安装 CNI 网络插件</li>
<li>检查 Master 的 Pod 及 集群状态</li>
</ol>
</blockquote>
<ol>
<li>
<p>执行初始化</p>
<ul>
<li>
<p>自定义配置较少时：推荐使用 <code>配置参数</code> 的方式进行初始化</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm init --kubernetes-version=v1.15.0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--pod-network-cidr=&lt;network-segment&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>自定义配置较多时，推荐使用 <code>配置文件</code> 的方式进行初始化：</p>
<ol>
<li>使用 <code>kubeadm config print init-defaults &gt; kubeadm-init.yaml</code> 获取初始配置文件进行相应的自定义修改</li>
<li>然后使用 <code>kubeadm init --config kubeadm-init.yaml</code>，通过配置文件进行初始化</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 修改初始化配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; master-init.yaml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: kubeadm.k8s.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: InitConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localAPIEndpoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> advertiseAddress: 192.168.0.123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> bindPort: 6443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: kubeadm.k8s.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetesVersion: v1.15.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networking:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dnsDomain: cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> podSubnet: &lt;network-segment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 执行初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubedam init --master-init.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<blockquote>
<p>注意：
初始化之后会安装网络插件，由于各个网络插件使用的网段不一样，
故需对 命令中的 <code>--pod-network-cidr=&lt;network-segment&gt;</code> 或文件中的 <code>podSubnet: &lt;network-segment&gt;</code> 进行自定义配置，
（Calico 的默认网段：192.168.0.0/16，Flannel 的默认网段：10.244.0.0/16）
拉取不到镜像时，使用 <code>kubeadm config images pull</code> 提前拉取镜像
输出以下内容表示成功：</p>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Your Kubernetes control-plane has initialized successfully!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To start using your cluster, you need to run the following as a regular user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mkdir -p $HOME/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You should now deploy a pod network to the cluster.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then you can join any number of worker nodes by running the following on each as root:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm join 192.168.0.123:6443 --token b0syjo.7q877s663mc1rbni \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --discovery-token-ca-cert-hash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sha256:cdbcbb721002cac7a7b347295922eabe65342e111a67d7f7acce50d0d9d8f27f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 上面一句是 Node 节点加入集群的命令，记得保存一下</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>按照提示，复制配置文件到普通用户目录</p>
<ul>
<li>
<p>非 root 用户</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 拷贝配置文件到 Master 节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 分发配置文件到各 Node 节点（让 Node 节点使用 `kubectl`）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode1:~/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode2:~/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 记得在 Node 上进行授权，sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>root 用户</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 拷贝配置文件到 Master 节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /root/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -i /etc/kubernetes/admin.conf /root/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 分发配置文件到各 Node 节点（让 Node 节点使用 `kubectl`）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode1:/root/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode2:/root/.kube/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>安装 CNI 网络插件</p>
<ul>
<li>
<p>Flannel 插件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参考：Flannel Github - <a href="https://idukelu.com/blog/2018/[https://github.com/coreos/flannel/](https://github.com/coreos/flannel/)">README.md</a></p>
</li>
<li>
<p>Calico 插件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://docs.projectcalico.org/v3.8/manifests/calico.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参考：Calico 官方文档 - <a href="https://docs.projectcalico.org/v3.8/getting-started/kubernetes/" target="_blank" rel="noopener noreferrer">Quickstart for Calico on Kubernetes</a>
更多 CNI 插件可以参考：Kubernetes 官方文档提供的教程 - <a href="https://kubernetes.io/docs/concepts/cluster-administration/addons/" target="_blank" rel="noopener noreferrer"> Installing Addons</a></p>
</li>
</ul>
</li>
<li>
<p>检查 Master 的 Pod 及 集群状态</p>
<ul>
<li>使用 <code>kubectl get pod -n kube-system -o wide</code>，查看 Pod 状态均为 <code>Runing</code> 即可</li>
<li>使用 <code>kubectl get node -o wide</code>，查看 Node 状态为 <code>Ready</code> 表示 Master 初始化完成</li>
</ul>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-初始化-node-节点">2. 初始化 Node 节点<a href="https://idukelu.com/blog/2018/k8s-install-detail#2-%E5%88%9D%E5%A7%8B%E5%8C%96-node-%E8%8A%82%E7%82%B9" class="hash-link" aria-label="2. 初始化 Node 节点的直接链接" title="2. 初始化 Node 节点的直接链接">​</a></h3>
<p>初始化 Node 节点就比较简单了，只有两步，即：</p>
<blockquote>
<ol>
<li>执行初始化</li>
<li>检查 Node 的 Pod 及 集群状态</li>
</ol>
</blockquote>
<ol>
<li>
<p>初始化 Node
使用 Master 初始化时的命令进行初始化即可，Node 节点初始化后，就直接加入了集群</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm join &lt;master-ip&gt;:6443 --token &lt;token&gt; --discovery-token-ca-cert-hash sha256:&lt;sha256&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：没有记录集群 join 命令的可以通过以下方式重新获取</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo kubeadm token create --print-join-command --ttl=0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>检查 Node 的 Pod 及 集群状态</p>
<ul>
<li>使用 <code>kubectl get pod -n kube-system -o wide</code>，查看 Pod 状态均为 <code>Runing</code> 即可</li>
<li>使用 <code>kubectl get node -o wide</code>，查看 所有节点 状态均为 <code>Ready</code> 表示 Master 初始化完成</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="五-重置-kubernetes-集群">五. 重置 Kubernetes 集群<a href="https://idukelu.com/blog/2018/k8s-install-detail#%E4%BA%94-%E9%87%8D%E7%BD%AE-kubernetes-%E9%9B%86%E7%BE%A4" class="hash-link" aria-label="五. 重置 Kubernetes 集群的直接链接" title="五. 重置 Kubernetes 集群的直接链接">​</a></h2>
<p>在集群安装失败，或者出现一些无法解决的问题时，可以重置集群，再重新安装
重置 Kubernetes 集群，主要的执行步骤如下：</p>
<blockquote>
<ol>
<li>kubeadm 集群重置</li>
<li>iptables 规则清理</li>
<li>ipvs 规则清理</li>
<li>kubernetes 配置文件清理</li>
<li>etcd 配置清理</li>
<li>cni 网络插件清理</li>
</ol>
</blockquote>
<p>废话不多说，直接撸代码</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipvsadm --clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf ~/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf /var/lib/etcd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig cni0 down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link delete cni0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig flannel.1 down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link delete flannel.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf /var/lib/cni/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>参考：
<a href="https://kubernetes.io/zh/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/zh/docs/setup/independent/install-kubeadm/</a>
<a href="https://k8smeetup.github.io/docs/reference/setup-tools/kubeadm/kubeadm-init/" target="_blank" rel="noopener noreferrer">https://k8smeetup.github.io/docs/reference/setup-tools/kubeadm/kubeadm-init/</a>
<a href="https://www.cnblogs.com/ding2016/p/10784620.html" target="_blank" rel="noopener noreferrer">centos7使用kubeadm安装部署kubernetes 1.14 - Adrian·Ding - 博客园</a>
<a href="https://yq.aliyun.com/articles/626118" target="_blank" rel="noopener noreferrer">CentOS7中用kubeadm安装Kubernetes-云栖社区-阿里云</a></p>]]></content:encoded>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[Kubernetes v1.15.0 集群的安装部署（精简版）]]></title>
            <link>https://idukelu.com/blog/2018/k8s-install-simple</link>
            <guid>https://idukelu.com/blog/2018/k8s-install-simple</guid>
            <pubDate>Sat, 28 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[软硬件要求]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="软硬件要求">软硬件要求<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E8%BD%AF%E7%A1%AC%E4%BB%B6%E8%A6%81%E6%B1%82" class="hash-link" aria-label="软硬件要求的直接链接" title="软硬件要求的直接链接">​</a></h2>
<table><thead><tr><th style="text-align:left">软硬件</th><th style="text-align:left">最低配置</th><th style="text-align:left">推荐配置</th></tr></thead><tbody><tr><td style="text-align:left">CPU 和 内存</td><td style="text-align:left">Master：至少2核4G、<br>Node：至少4核16G</td><td style="text-align:left">Master：4核16G、<br>Node：根据运行的容器数量进行配置</td></tr><tr><td style="text-align:left">Linux 操作系统</td><td style="text-align:left">基于 x86_64 架构的各种Linux 发行版，Kernel 3.10 以上</td><td style="text-align:left">Red Hat Linux 7<br>CentOS 7</td></tr><tr><td style="text-align:left">etcd</td><td style="text-align:left">3.0 版本及以上</td><td style="text-align:left">3.3 版本</td></tr><tr><td style="text-align:left">Docker</td><td style="text-align:left">18.03 版本及以上</td><td style="text-align:left">18.09 版本</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="机器准备">机器准备<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E6%9C%BA%E5%99%A8%E5%87%86%E5%A4%87" class="hash-link" aria-label="机器准备的直接链接" title="机器准备的直接链接">​</a></h2>
<table><thead><tr><th style="text-align:left">角色</th><th style="text-align:left">主机名称</th><th style="text-align:left">内网 IP</th><th style="text-align:left">配置</th><th style="text-align:left">系统</th></tr></thead><tbody><tr><td style="text-align:left">Master</td><td style="text-align:left">KubernetesMaster</td><td style="text-align:left">192.168.0.123</td><td style="text-align:left">2 核 4 G</td><td style="text-align:left">CentOS 7.6.5</td></tr><tr><td style="text-align:left">Node</td><td style="text-align:left">KubernetesNode1</td><td style="text-align:left">192.168.0.122</td><td style="text-align:left">2 核 4 G</td><td style="text-align:left">CentOS 7.6.5</td></tr><tr><td style="text-align:left">Node</td><td style="text-align:left">KubernetesNode2</td><td style="text-align:left">192.168.0.121</td><td style="text-align:left">2 核 4 G</td><td style="text-align:left">CentOS 7.6.5</td></tr><tr><td style="text-align:left">注：这里只是做环境测试，故只满足了官方要求的最低 2 核 2 G</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署步骤">部署步骤<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4" class="hash-link" aria-label="部署步骤的直接链接" title="部署步骤的直接链接">​</a></h2>
<p>使用 kubeadm 部署 kubernetes 主要有以下四个步骤：</p>
<blockquote>
<ol>
<li>安装 Docker （所有主机）</li>
<li>安装 Kubeadm（所有主机）</li>
<li>基础环境配置（所有主机）</li>
<li>创建 Kubernetes 集群</li>
</ol>
</blockquote>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="一-安装-docker所有主机">一. 安装 Docker（所有主机）<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E4%B8%80-%E5%AE%89%E8%A3%85-docker%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA" class="hash-link" aria-label="一. 安装 Docker（所有主机）的直接链接" title="一. 安装 Docker（所有主机）的直接链接">​</a></h3>
<p>安装 Docker 引擎，主要执行以下步骤：</p>
<blockquote>
<ol>
<li>安装 Docker 需要的一些系统工具</li>
<li>设置 Docker 的 yum 仓库源</li>
<li>安装并启动 Docker</li>
<li>调整 Docker 部分参数（主要是配合 Kubernetes 的一些配置）</li>
</ol>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. 安装必要的一些系统工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 设置 Docker 的 yum 仓库源（稳定存储库: 阿里云源）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. 安装并启动 Docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y docker-ce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start docker &amp;&amp; systemctl enable docker </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. 调整 Docker 部分参数（修改国内镜像加速: 阿里云镜像、修改cgroup 驱动）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /etc/docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> "registry-mirrors": ["https://pcy9sknd.mirror.aliyuncs.com"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> "exec-opts": ["native.cgroupdriver=systemd"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload &amp;&amp; systemctl restart docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="二-安装-kubeadm所有主机">二. 安装 Kubeadm（所有主机）<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E4%BA%8C-%E5%AE%89%E8%A3%85-kubeadm%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA" class="hash-link" aria-label="二. 安装 Kubeadm（所有主机）的直接链接" title="二. 安装 Kubeadm（所有主机）的直接链接">​</a></h3>
<p>安装 Kubeadm 主要有以下三个步骤：</p>
<blockquote>
<ol>
<li>配置 Kubernetes 的 yum 仓库源（这里选用阿里的源，你懂的）</li>
<li>安装 Kubeadm 和相关工具</li>
<li>启动 Kubelet</li>
</ol>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. 设置 Kubernetes 的 yum 仓库源（阿里云源）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/yum.repos.d/kubernetes.repo &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=Kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repo_gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 安装 Kubeadm 和相关工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y kubelet kubeadm kubectl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. 启动 Kubelet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start kubelet &amp;&amp; systemctl enable kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="三-基础环境配置所有主机">三. 基础环境配置（所有主机）<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E4%B8%89-%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%89%80%E6%9C%89%E4%B8%BB%E6%9C%BA" class="hash-link" aria-label="三. 基础环境配置（所有主机）的直接链接" title="三. 基础环境配置（所有主机）的直接链接">​</a></h3>
<p>基础环境配置，主要执行以下步骤：</p>
<blockquote>
<ol>
<li>设置各节点时间精确同步</li>
<li>关闭 firewalld/iptables 防火墙</li>
<li>关闭 SElinux 安全模组</li>
<li>关闭 Swap 交换分区</li>
<li>导入 IPVS 模块</li>
<li>修改 Bridge 桥接规则</li>
<li>开启 iptables 的 FORWARD 转发链</li>
<li>配置 Hosts 解析</li>
</ol>
</blockquote>
<h3></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. 设置各节点时间精确同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start chronyd.service &amp;&amp; systemctl enable chronyd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 关闭 firewalld 防火墙（允许 master 和 node 的网络通信）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. 关闭 SElinux 安全模组（让容器可以读取主机的文件系统）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">setenforce 0 &amp;&amp; sed -i "s/SELINUX=enforcing$/SELINUX=disabled/g" /etc/selinux/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4.  关闭 Swap 交换分区（启用了 Swap，则 Qos 策略可能会失效）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swapoff -a &amp;&amp; sed -i "s/\/dev\/mapper\/centos-swap/\#\/dev\/mapper\/centos-swap/g" /etc/fstab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 5. 导入 IPVS 模块（用来为大量服务进行负载均衡）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs_rr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs_wrr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- ip_vs_sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe -- nf_conntrack_ipv4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 6.  修改 Bridge 桥接规则（部分 Docker 安装时会为我们修改，这里统一进行手动修改）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.swappiness=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl --system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 7. 开启 iptables 的 FORWARD 转发链（Docker 1.13 后禁用了 FORWARD 链，这可能会引起 Pod 间无法通信）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -P FORWARD ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -i '/ExecStart/a ExecStartPost=/sbin/iptables -P FORWARD ACCEPT' /usr/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lib/systemd/system/docker.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 8.  配置 Hosts 解析（添加 k8s 所有节点的 IP 和对应主机名，否则初始化的时候会出现告警甚至错误）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tee /etc/hosts &lt;&lt;-'EOF'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">::1     localhost       localhost.localdomain   localhost6      localhost6.localdomain6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">127.0.0.1       localhost       localhost.localdomain   localhost4      localhost4.localdomain4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.123 kube-master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.122 kube-node1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.121 kube-node2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 9. 安装一些必要的工具（这些工具在以后的命令中会用到）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y ipset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y ipvsadm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y bind-utils</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="四-创建-kubernetes-集群">四. 创建 Kubernetes 集群<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E5%9B%9B-%E5%88%9B%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4" class="hash-link" aria-label="四. 创建 Kubernetes 集群的直接链接" title="四. 创建 Kubernetes 集群的直接链接">​</a></h3>
<p>创建 Kubernetes 集群主要有两个步骤：</p>
<blockquote>
<ol>
<li>初始化 Master 节点</li>
<li>初始化 Node 节点</li>
</ol>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-初始化-master-节点">1. 初始化 Master 节点<a href="https://idukelu.com/blog/2018/k8s-install-simple#1-%E5%88%9D%E5%A7%8B%E5%8C%96-master-%E8%8A%82%E7%82%B9" class="hash-link" aria-label="1. 初始化 Master 节点的直接链接" title="1. 初始化 Master 节点的直接链接">​</a></h4>
<p>初始化 Master 节点，主要有四个步骤：</p>
<blockquote>
<ol>
<li>执行初始化</li>
<li>复制(分发)配置文件</li>
<li>安装 CNI 网络插件</li>
<li>检查 Master 的 Pod 及 集群状态</li>
</ol>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-执行初始化">1. 执行初始化<a href="https://idukelu.com/blog/2018/k8s-install-simple#1-%E6%89%A7%E8%A1%8C%E5%88%9D%E5%A7%8B%E5%8C%96" class="hash-link" aria-label="1. 执行初始化的直接链接" title="1. 执行初始化的直接链接">​</a></h5>
<ul>
<li>较少自定义配置时，采用 <code>配置参数</code> 的方式进行初始化</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm init --kubernetes-version=v1.15.0 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--pod-network-cidr=&lt;network-segment&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>较多自定义配置时，采用<code>配置文件</code> 的方式进行初始化</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 获取默认初始化配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm config print init-defaults &gt; kubeadm-init.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 修改为自定义初始化配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; master-init.yaml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: kubeadm.k8s.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: InitConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localAPIEndpoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> advertiseAddress: 192.168.0.123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> bindPort: 6443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: kubeadm.k8s.io/v1beta2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetesVersion: v1.15.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networking:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dnsDomain: cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> podSubnet: &lt;network-segment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 执行初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubedam init --master-init.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：
初始化之后会安装网络插件，由于各个网络插件使用的网段不一样，
故需对 命令中的<code>--pod-network-cidr=&lt;network-segment&gt;</code> 或文件中的 <code>podSubnet: &lt;network-segment&gt;</code> 进行自定义配置，
Calico 的默认网段：192.168.0.0/16，Flannel 的默认网段：10.244.0.0/16</p>
<p>输出以下内容表示成功：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Your Kubernetes control-plane has initialized successfully!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To start using your cluster, you need to run the following as a regular user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mkdir -p $HOME/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You should now deploy a pod network to the cluster.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Then you can join any number of worker nodes by running the following on each as root:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm join 192.168.0.123:6443 --token b0syjo.7q877s663mc1rbni \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --discovery-token-ca-cert-hash sha256:cdbcbb721002cac7a7b347295922eabe65342e111a67d7f7acce50d0d9d8f27f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 上面一句是 Node 节点加入集群的命令，记得保存一下</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-按照提示复制配置文件到普通用户目录">2. 按照提示，复制配置文件到普通用户目录<a href="https://idukelu.com/blog/2018/k8s-install-simple#2-%E6%8C%89%E7%85%A7%E6%8F%90%E7%A4%BA%E5%A4%8D%E5%88%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%B0%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%9B%AE%E5%BD%95" class="hash-link" aria-label="2. 按照提示，复制配置文件到普通用户目录的直接链接" title="2. 按照提示，复制配置文件到普通用户目录的直接链接">​</a></h5>
<ul>
<li>非 root 用户</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 拷贝配置文件到 Master 节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 分发配置文件到各 Node 节点（让 Node 节点使用 `kubectl`）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode1:~/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode2:~/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 记得在 Node 上进行授权，sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>root 用户</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 拷贝配置文件到 Master 节点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /root/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -i /etc/kubernetes/admin.conf /root/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 分发配置文件到各 Node 节点（让 Node 节点使用 `kubectl`）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode1:/root/.kube/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scp /etc/kubernetes/admin.conf KubernetesNode2:/root/.kube/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-安装-cni-网络插件">3. 安装 CNI 网络插件<a href="https://idukelu.com/blog/2018/k8s-install-simple#3-%E5%AE%89%E8%A3%85-cni-%E7%BD%91%E7%BB%9C%E6%8F%92%E4%BB%B6" class="hash-link" aria-label="3. 安装 CNI 网络插件的直接链接" title="3. 安装 CNI 网络插件的直接链接">​</a></h5>
<ul>
<li>Flannel 插件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Calico 插件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://docs.projectcalico.org/v3.8/manifests/calico.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>CNI 插件参考：</p>
<ul>
<li>Flannel Github - <a href="https://idukelu.com/blog/2018/[https://github.com/coreos/flannel/](https://github.com/coreos/flannel/)">README.md</a></li>
<li>Calico 官方文档 - <a href="https://docs.projectcalico.org/v3.8/getting-started/kubernetes/" target="_blank" rel="noopener noreferrer">Quickstart for Calico on Kubernetes</a></li>
<li>更多可以参考：Kubernetes 官方文档提供的教程 - <a href="https://kubernetes.io/docs/concepts/cluster-administration/addons/" target="_blank" rel="noopener noreferrer"> Installing Addons</a></li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-检查-master-的-pod-及-集群状态">4. 检查 Master 的 Pod 及 集群状态<a href="https://idukelu.com/blog/2018/k8s-install-simple#4-%E6%A3%80%E6%9F%A5-master-%E7%9A%84-pod-%E5%8F%8A-%E9%9B%86%E7%BE%A4%E7%8A%B6%E6%80%81" class="hash-link" aria-label="4. 检查 Master 的 Pod 及 集群状态的直接链接" title="4. 检查 Master 的 Pod 及 集群状态的直接链接">​</a></h5>
<ul>
<li>使用 <code>kubectl get pod -n kube-system -o wide</code>，查看 Pod 状态均为 <code>Runing</code> 即可</li>
<li>使用 <code>kubectl get node -o wide</code>，查看 Node 状态为 <code>Ready</code> 表示 Master 初始化完成</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-初始化-node-节点">2. 初始化 Node 节点<a href="https://idukelu.com/blog/2018/k8s-install-simple#2-%E5%88%9D%E5%A7%8B%E5%8C%96-node-%E8%8A%82%E7%82%B9" class="hash-link" aria-label="2. 初始化 Node 节点的直接链接" title="2. 初始化 Node 节点的直接链接">​</a></h4>
<p>初始化 Node 节点就比较简单了，只有两步，即：</p>
<blockquote>
<ol>
<li>执行初始化</li>
<li>检查 Node 的 Pod 及 集群状态</li>
</ol>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-初始化-node">1. 初始化 Node<a href="https://idukelu.com/blog/2018/k8s-install-simple#1-%E5%88%9D%E5%A7%8B%E5%8C%96-node" class="hash-link" aria-label="1. 初始化 Node的直接链接" title="1. 初始化 Node的直接链接">​</a></h5>
<p>使用 Master 初始化时的命令进行初始化即可，Node 节点初始化后，就直接加入了集群</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm join &lt;master-ip&gt;:6443 --token &lt;token&gt; --discovery-token-ca-cert-hash sha256:&lt;sha256&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：没有记录集群 join 命令的可以通过以下方式重新获取</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo kubeadm token create --print-join-command --ttl=0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-检查-node-的-pod-及-集群状态">2. 检查 Node 的 Pod 及 集群状态<a href="https://idukelu.com/blog/2018/k8s-install-simple#2-%E6%A3%80%E6%9F%A5-node-%E7%9A%84-pod-%E5%8F%8A-%E9%9B%86%E7%BE%A4%E7%8A%B6%E6%80%81" class="hash-link" aria-label="2. 检查 Node 的 Pod 及 集群状态的直接链接" title="2. 检查 Node 的 Pod 及 集群状态的直接链接">​</a></h5>
<ul>
<li>使用 <code>kubectl get pod -n kube-system -o wide</code>，查看 Pod 状态均为 <code>Runing</code> 即可</li>
<li>使用 <code>kubectl get node -o wide</code>，查看 所有节点 状态均为 <code>Ready</code> 表示 Master 初始化完成</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="五-重置-kubernetes-集群">五. 重置 Kubernetes 集群<a href="https://idukelu.com/blog/2018/k8s-install-simple#%E4%BA%94-%E9%87%8D%E7%BD%AE-kubernetes-%E9%9B%86%E7%BE%A4" class="hash-link" aria-label="五. 重置 Kubernetes 集群的直接链接" title="五. 重置 Kubernetes 集群的直接链接">​</a></h3>
<p>重置 Kubernetes 集群，主要的执行步骤如下：</p>
<blockquote>
<ol>
<li>kubeadm 集群重置</li>
<li>iptables 规则清理</li>
<li>ipvs 规则清理</li>
<li>kubernetes 配置文件清理</li>
<li>etcd 配置清理</li>
<li>cni 网络插件清理</li>
</ol>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubeadm reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipvsadm --clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf ~/.kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf /var/lib/etcd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig cni0 down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link delete cni0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig flannel.1 down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip link delete flannel.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf /var/lib/cni/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>参考：
<a href="https://kubernetes.io/zh/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/zh/docs/setup/independent/install-kubeadm/</a>
<a href="https://k8smeetup.github.io/docs/reference/setup-tools/kubeadm/kubeadm-init/" target="_blank" rel="noopener noreferrer">https://k8smeetup.github.io/docs/reference/setup-tools/kubeadm/kubeadm-init/</a>
<a href="https://www.cnblogs.com/ding2016/p/10784620.html" target="_blank" rel="noopener noreferrer">centos7使用kubeadm安装部署kubernetes 1.14 - Adrian·Ding - 博客园</a>
<a href="https://yq.aliyun.com/articles/626118" target="_blank" rel="noopener noreferrer">CentOS7中用kubeadm安装Kubernetes-云栖社区-阿里云</a></p>]]></content:encoded>
            <category>kubernetes</category>
        </item>
        <item>
            <title><![CDATA[Linux/Mac 配置环境变量]]></title>
            <link>https://idukelu.com/blog/2018/linux-mac-env-setting</link>
            <guid>https://idukelu.com/blog/2018/linux-mac-env-setting</guid>
            <pubDate>Sat, 28 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[概述]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="https://idukelu.com/blog/2018/linux-mac-env-setting#%E6%A6%82%E8%BF%B0" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接">​</a></h2>
<p>Linux/Mac 均是 Unix 类型的系统，故它们配置环境变量的方式基本一致，通常环境变量有以下三种级别：</p>
<ul>
<li>系统级环境变量：配置的环境变量，对所有用户生效</li>
<li>用户级环境变量：配置的环境变量，仅对当前用户生效</li>
<li>临时境变量：配置的环境变量，当前用户生效，退出后环境变量被清除</li>
</ul>
<blockquote>
<p>优先级：临时 &gt; 用户级 &gt; 系统级，优先级高的会覆盖优先级低的环境变量</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="系统级环境变量">系统级环境变量<a href="https://idukelu.com/blog/2018/linux-mac-env-setting#%E7%B3%BB%E7%BB%9F%E7%BA%A7%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="hash-link" aria-label="系统级环境变量的直接链接" title="系统级环境变量的直接链接">​</a></h2>
<p>配置系统级环境变量，修改 <code>/etc/profile</code> 文件即可</p>
<ul>
<li>
<p>编辑 <code>/etc/profile</code> 文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vi /etc/profile  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>写入环境变量（这里以配置 Java 环境变量为例）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/opt/jdk/jdk1.8.0_241</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$JAVA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>使环境变量生效</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source /etc/profile  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="用户级环境变量">用户级环境变量<a href="https://idukelu.com/blog/2018/linux-mac-env-setting#%E7%94%A8%E6%88%B7%E7%BA%A7%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="hash-link" aria-label="用户级环境变量的直接链接" title="用户级环境变量的直接链接">​</a></h2>
<p>配置系统级环境变量，修改 <code>～/.bash_profile</code> 或 <code>～/.bashrc</code> 文件即可，<code>.bash_profile</code> 和 <code>.bashrc</code> 有什么不用可以参考这篇文章：<a href="https://blog.csdn.net/sch0120/article/details/70256318" target="_blank" rel="noopener noreferrer">关于“.bash_profile”和“.bashrc”区别的总结</a></p>
<ul>
<li>
<p>编辑 <code>～/.bash_profile</code> 文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vi ～/.bash_profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>写入环境变量（这里以配置 Java 环境变量为例）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/opt/jdk/jdk1.8.0_241</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$JAVA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>使环境变量生效</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source ～/.bash_profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="临时环境变量">临时环境变量<a href="https://idukelu.com/blog/2018/linux-mac-env-setting#%E4%B8%B4%E6%97%B6%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="hash-link" aria-label="临时环境变量的直接链接" title="临时环境变量的直接链接">​</a></h2>
<p>配置临时环境变量，仅需使用 <code>export</code> 命令即可</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/opt/jdk/jdk1.8.0_241</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$JAVA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>linux</category>
            <category>mac</category>
        </item>
        <item>
            <title><![CDATA[Linux/Mac 配置 Java 环境]]></title>
            <link>https://idukelu.com/blog/2018/linux-mac-java-env-setting</link>
            <guid>https://idukelu.com/blog/2018/linux-mac-java-env-setting</guid>
            <pubDate>Sat, 28 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[一、下载并解压 JDK]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一下载并解压-jdk">一、下载并解压 JDK<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#%E4%B8%80%E4%B8%8B%E8%BD%BD%E5%B9%B6%E8%A7%A3%E5%8E%8B-jdk" class="hash-link" aria-label="一、下载并解压 JDK的直接链接" title="一、下载并解压 JDK的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-下载-jdk">1. 下载 JDK<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#1-%E4%B8%8B%E8%BD%BD-jdk" class="hash-link" aria-label="1. 下载 JDK的直接链接" title="1. 下载 JDK的直接链接">​</a></h3>
<p>这个没有什么好说的，一般我们使用 Oracle JDK，在 Oracle 官网<a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank" rel="noopener noreferrer">下载对应系统的 JDK 版本</a>即可</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-解压-jdk">2. 解压 JDK<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#2-%E8%A7%A3%E5%8E%8B-jdk" class="hash-link" aria-label="2. 解压 JDK的直接链接" title="2. 解压 JDK的直接链接">​</a></h3>
<p>通常，大多数情况下，都是将资源库等文件放在 <code>/usr/local/</code> 目录下。这里出于个人习惯，我一般将非系统的软件和资源等放在 <code>/opt/</code> 目录下，所以将刚刚下载的 JDK 移动到 /opt/ 目录下并解压</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /opt/jdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv ./jdk-8u241-linux-x64.tar.gz /opt/jdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/jdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -zxvf jdk-8u241-linux-x64.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二配置-java-环境变量">二、配置 Java 环境变量<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#%E4%BA%8C%E9%85%8D%E7%BD%AE-java-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="hash-link" aria-label="二、配置 Java 环境变量的直接链接" title="二、配置 Java 环境变量的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-java-环境变量说明">1. Java 环境变量说明<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#1-java-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AF%B4%E6%98%8E" class="hash-link" aria-label="1. Java 环境变量说明的直接链接" title="1. Java 环境变量说明的直接链接">​</a></h3>
<p>配置 Java 环境变量，会配置 <code>JAVA_HOME</code>、<code>CLASSPATH</code>、<code>PATH</code> 3 个环境变量，下面是它们的简单说明：</p>
<ol>
<li><code>JAVA_HOME</code> 环境变量：指定 JDK 的安装目录。Eclipse/IDEA/Tomcat 等软件就是通过搜索 JAVA_HOME 变量来找到并使用安装好的 JDK。</li>
<li><code>CLASSPATH</code> 环境变量：指定类搜索路径。JVM 就是通过CLASSPTH 来寻找类的。我们 需要把 JDK 安装目录下的 lib 子目录中的 dt.jar 和 tools.jar 设置到 CLASSPATH 中。当然，当前目录 “.” 也必须加入到该变量中。</li>
<li><code>PATH</code> 环境变量：指定命令搜索路径。在 Shell 下面执行命令时，它会到 PATH 变量所指定的路径中查找看是否能找到相应的命令程序。我们需要把 JDK 安装目录下的 bin 目录增加到现有的 PATH 变量中，bin 目录中包含经常要用到的可执行文件。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-写入-java-环境变量">2. 写入 Java 环境变量<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#2-%E5%86%99%E5%85%A5-java-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="hash-link" aria-label="2. 写入 Java 环境变量的直接链接" title="2. 写入 Java 环境变量的直接链接">​</a></h3>
<p>环境变量通常有 3 个级别：系统级、用户级、临时（关于环境变量可以参考：<a href="https://www.cnblogs.com/dukelu/p/12351362.html" target="_blank" rel="noopener noreferrer">Linux/Mac 配置环境变量</a>）。我们可以根据自己的场景灵活配置</p>
<ul>
<li>
<p>系统级：对所有用户生效，在 <code>/etc/profile</code> 文件追加 Java 环境变量</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/opt/jdk/jdk1.8.0_241</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$JAVA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ps: 保存文件后，记得 <code>source /etc/profile</code>，使写入的配置生效</p>
</li>
<li>
<p>用户级：仅对当前用户生效，在 <code>～/.bash_profile</code> 或 <code>～/.bashrc</code> 文件追加 Java 环境变量</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/opt/jdk/jdk1.8.0_241</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$JAVA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ps: 保存文件后，记得 <code>source ～/.bash_profile</code> 或 <code>source ～/.bashrc</code>，使写入的配置生效</p>
</li>
<li>
<p>临时：仅对当前用户临时生效，退出后被系统清理，在命令行执行以下命令即可</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export JAVA_HOME=/opt/jdk/jdk1.8.0_241</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PATH=$JAVA_HOME/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ps: 配置临时环境变量，一般用于调试使用，不建议用这种方式配置</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三验证是否配置成功">三、验证是否配置成功<a href="https://idukelu.com/blog/2018/linux-mac-java-env-setting#%E4%B8%89%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F" class="hash-link" aria-label="三、验证是否配置成功的直接链接" title="三、验证是否配置成功的直接链接">​</a></h2>
<p>验证 Java 环境是否配置成功，只需运行命令 <code>java -versiong</code>，返回并显示有 JDK 版本号就说明 Java 环境已经配置成功了</p>]]></content:encoded>
            <category>linux</category>
            <category>mac</category>
            <category>java</category>
        </item>
        <item>
            <title><![CDATA[Homebrew 入门及常用命令]]></title>
            <link>https://idukelu.com/blog/2018/homebrew-quick-start</link>
            <guid>https://idukelu.com/blog/2018/homebrew-quick-start</guid>
            <pubDate>Sat, 21 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[简介]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="https://idukelu.com/blog/2018/homebrew-quick-start#%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2>
<p><code>Hombrew</code> 是 macOS系统下的一款缺失软件包的管理器。</p>
<ul>
<li>完全基于 Git 和 Ruby</li>
<li>将软件包安装到独立目录，并将其文件软链接至 /usr/local/bin</li>
<li>安装到独立目录，使得软件包易于卸载</li>
<li>通过软链接的方式，意味着不用再去配置环境变量</li>
<li>易于管理软件包，省去安装配置繁琐的过程</li>
</ul>
<blockquote>
<p>在Homebrew中，软件包分为 CLI 软件包和 GUI 软件包：</p>
<ul>
<li>CLI 的软件包称为 <code>formula</code>，被安装至 <code>/usr/local/Cellar</code>，如 git、maven 等</li>
<li>GUI 的软件包称为 <code>cask</code>，被安装至 <code>/usr/local/Caskroom</code>，如 QQ、WeChat 等</li>
</ul>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装和卸载">安装和卸载<a href="https://idukelu.com/blog/2018/homebrew-quick-start#%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD" class="hash-link" aria-label="安装和卸载的直接链接" title="安装和卸载的直接链接">​</a></h2>
<p>Mac 默认集成了 Ruby，直接运行以下 Ruby 脚步即可</p>
<ul>
<li>安装</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>安装之后，<code>Homebrew</code> 会为你自动设置环境变量，以使用提供的命令</p>
<ul>
<li>卸载</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/ruby -e "\$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>卸载之后，<code>Homebrew</code> 在安装时创建的目录、下载的软件包及软件包的软链接均会被删除</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="基本使用">基本使用<a href="https://idukelu.com/blog/2018/homebrew-quick-start#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="基本使用的直接链接" title="基本使用的直接链接">​</a></h2>
<p>Homebrew 最常用的几个操作便是软件包的搜索、下载、卸载、更新以及查看</p>
<p><strong>通用操作</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 搜索查询</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew search [text | /regex/] // 无参：查找所有可安装的软件包；有参：根据字符串搜索软件包，/regex/表示正则</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 清理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cleanup [formula | cask] // 无参：删除所有 formula 和 cask 过时版本；有参：删除指定 formula 或 cask 过时版本；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew update // 更新 Homebrew</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>对 <code>formula</code> 的操作</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 安装、卸载、重装、更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew install (formula) // 安装指定 formula</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew reinstall (formula) // 重装指定 formula</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew uninstall (formula) // 卸载指定 formula</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew upgrade [formula] // 无参：更新所有已安装 formula；有参：更新指定 formula</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 查看</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew list [formula] // 无参：列出所有已安装 formula；有参：列出指定 formula 的相关列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew info [formula] // 无参：列出已安装 formula 综合信息；有参：列出指定 formula 的信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew home [formula] // 无参: 打开 Homebrew 官网；有参：列出指定 formula 的官网</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew outdated // 列出已过时的 formula</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew deps (formula) // 列出指定 formula 的依赖项</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew doctor 检查配置问题</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>对 <code>cask</code> 的操作</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 安装、卸载、重装、更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask install (formula) // 安装指定 cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask reinstall (formula) // 重装指定 cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask uninstall (formula) // 卸载指定 cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask upgrade [formula] // 无参：更新所有已安装 cask；有参：更新指定 cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 查看</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask list [formula] // 无参：列出所有已安装 cask；有参：列出指定 cask 的相关列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask info [formula] // 无参：列出已安装 cask 综合信息；有参：列出指定 cask 的信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask home [formula] // 无参: 打开 Homebrew 官网；有参：列出指定 cask 的官网</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask outdated // 列出已过时的 cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew cask doctor 检查配置问题</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="关于-homebrew-的目录">关于 Homebrew 的目录<a href="https://idukelu.com/blog/2018/homebrew-quick-start#%E5%85%B3%E4%BA%8E-homebrew-%E7%9A%84%E7%9B%AE%E5%BD%95" class="hash-link" aria-label="关于 Homebrew 的目录的直接链接" title="关于 Homebrew 的目录的直接链接">​</a></h2>
<ul>
<li><code>/usr/local/Homebrew</code>：<code>Homebrew</code> 程序本身的安装目录</li>
<li><code>/usr/local/Cellar</code>：存放<code>formula</code> 的目录</li>
<li><code>/usr/local/Caskroom</code>：存放<code>cask</code> 的目录</li>
<li><code>/usr/local/opt</code>：所有包忽略版本的存放目录</li>
<li><code>/usr/local/bin</code>：所有包二进制目录</li>
<li><code>/usr/local/etc</code>：所有包配置文件目录</li>
<li><code>/usr/local/lib</code>：所有包依赖库目录</li>
<li><code>/usr/local/share</code>：所有包文档文件目录</li>
</ul>
<hr>
<p>更多参考：
<a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">https://brew.sh</a>
<a href="https://docs.brew.sh/Manpage" target="_blank" rel="noopener noreferrer">https://docs.brew.sh/Manpage</a></p>]]></content:encoded>
            <category>homebrew</category>
        </item>
        <item>
            <title><![CDATA[oh-my-zsh 报错：提示检测到不安全的完成相关目录]]></title>
            <link>https://idukelu.com/blog/2018/oh-my-zsh-unsafe</link>
            <guid>https://idukelu.com/blog/2018/oh-my-zsh-unsafe</guid>
            <pubDate>Sun, 15 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[问题]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题<a href="https://idukelu.com/blog/2018/oh-my-zsh-unsafe#%E9%97%AE%E9%A2%98" class="hash-link" aria-label="问题的直接链接" title="问题的直接链接">​</a></h2>
<p>运行命令时，<code>oh-my-zsh</code> 冒出下面一大堆提示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] Insecure completion-dependent directories detected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x   16 duke  staff   512 Jul 14 10:14 /Users/duke/.oh-my-zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x  250 duke  staff  8000 Jul 14 10:14 /Users/duke/.oh-my-zsh/plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x    4 duke  staff   128 Jul 14 10:14 /Users/duke/.oh-my-zsh/plugins/git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x    3 duke  staff    96 Jun 17 11:33 /usr/local/share/zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x    6 duke  staff   192 Oct  3 10:04 /usr/local/share/zsh/site-functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxr-xr-x    1 duke  staff    39 Jun 17 11:37 /usr/local/share/zsh/site-functions/_brew -&gt; ../../../Homebrew/completions/zsh/_brew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxr-xr-x    1 duke  staff    44 Jun 17 11:37 /usr/local/share/zsh/site-functions/_brew_cask -&gt; ../../../Homebrew/completions/zsh/_brew_cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxr-xr-x    1 duke  staff    58 Oct  3 10:04 /usr/local/share/zsh/site-functions/_git -&gt; ../../../Cellar/git/2.19.0_2/share/zsh/site-functions/_git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] For safety, we will not load completions from these directories until</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] you fix their permissions and ownership and restart zsh.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] See the above list for directories with group or other writability.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] To fix your permissions you can do so by disabling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] the write permission of "group" and "others" and making sure that the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] owner of these directories is either root or your current user.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] The following command may help:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh]     compaudit | xargs chmod g-w,o-w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] If the above didn't help or you want to skip the verification of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] insecure directories you can set the variable ZSH_DISABLE_COMPFIX to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] "true" before oh-my-zsh is sourced in your zshrc file.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决">解决<a href="https://idukelu.com/blog/2018/oh-my-zsh-unsafe#%E8%A7%A3%E5%86%B3" class="hash-link" aria-label="解决的直接链接" title="解决的直接链接">​</a></h2>
<p>问题的描述中，其实已经给了我们解决方法：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] To fix your permissions you can do so by disabling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] the write permission of "group" and "others" and making sure that the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] owner of these directories is either root or your current user.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] The following command may help:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh]     compaudit | xargs chmod g-w,o-w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] If the above didn't help or you want to skip the verification of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] insecure directories you can set the variable ZSH_DISABLE_COMPFIX to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[oh-my-zsh] "true" before oh-my-zsh is sourced in your zshrc file.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>要修复权限，可以通过禁用“group”和“others”的写入权限并确保这些目录的所有者是root用户或当前用户来修复权限。
以下命令可能有所帮助：
compaudit | xargs chmod g-w，o-w
如果上面没有帮助，或者你想跳过不安全目录的验证，你可以在你的zshrc文件中找到oh-my-zsh之前将变量ZSH_DISABLE_COMPFIX设置为“true”。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第一种解决方法修改相关文件夹权限">第一种解决方法：修改相关文件夹权限<a href="https://idukelu.com/blog/2018/oh-my-zsh-unsafe#%E7%AC%AC%E4%B8%80%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9D%83%E9%99%90" class="hash-link" aria-label="第一种解决方法：修改相关文件夹权限的直接链接" title="第一种解决方法：修改相关文件夹权限的直接链接">​</a></h3>
<p>为以上提示的文件夹修改权限（根据具体提示修改）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /Users/duke/.oh-my-zsh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /Users/duke/.oh-my-zsh/plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /Users/duke/.oh-my-zsh/plugins/git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /usr/local/share/zsh/site-functions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /usr/local/share/zsh/site-functions/_brew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /usr/local/share/zsh/site-functions/_brew_cask</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 755 /usr/local/share/zsh/site-functions/_git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第二种解决方法设置变量-zsh_disable_compfixtrue">第二种解决方法：设置变量 ZSH_DISABLE_COMPFIX=true<a href="https://idukelu.com/blog/2018/oh-my-zsh-unsafe#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F-zsh_disable_compfixtrue" class="hash-link" aria-label="第二种解决方法：设置变量 ZSH_DISABLE_COMPFIX=true的直接链接" title="第二种解决方法：设置变量 ZSH_DISABLE_COMPFIX=true的直接链接">​</a></h3>
<ol>
<li>在.zshrc文件的第一行添加 <code>ZSH_DISABLE_COMPFIX=true</code></li>
<li>运行source命令，重新加载.zshrc文件</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.zshrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>oh-my-zsh</category>
        </item>
        <item>
            <title><![CDATA[访问 Redis，提示进入保护模式]]></title>
            <link>https://idukelu.com/blog/2018/redis-protected-mode</link>
            <guid>https://idukelu.com/blog/2018/redis-protected-mode</guid>
            <pubDate>Sun, 15 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[问题]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题<a href="https://idukelu.com/blog/2018/redis-protected-mode#%E9%97%AE%E9%A2%98" class="hash-link" aria-label="问题的直接链接" title="问题的直接链接">​</a></h2>
<p>Redis protected-mode 是3.2 之后加入的新特性，通过参考配置文件上的说明：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># When protected mode is on and if:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1) The server is not binding explicitly to a set of addresses using the "bind" directive.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2) No password is configured.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以知道，以下两种情况会开启保护模式：</p>
<ol>
<li>服务器没有使用“bind”指令显式绑定到一组地址</li>
<li>没有配置密码</li>
</ol>
<p>从而不能进行远程连接，否则就会有以下提示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command 'CONFIG SET protected-mode no' from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to 'no', and then restarting the server. 3) If you started the server manually just for testing, restart it with the '--protected-mode no' option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection closed by foreign host.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决">解决<a href="https://idukelu.com/blog/2018/redis-protected-mode#%E8%A7%A3%E5%86%B3" class="hash-link" aria-label="解决的直接链接" title="解决的直接链接">​</a></h2>
<p>在问题描述中，已经给出了相应的解决方案</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1) Just disable protected mode sending the command 'CONFIG SET protected-mode no' from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to 'no', and then restarting the server. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3) If you started the server manually just for testing, restart it with the '--protected-mode no' option. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4) Setup a bind address or an authentication password. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<ol>
<li>发送命令 <code>CONFIG SET protected-mode no</code> ，这种设置不是永久的，但可以修改配置文件使之永久生效</li>
<li>修改配置文件 <code>/etc/redis.conf</code> ，将 <code>protected-mode yes</code> 设置为 <code>no</code></li>
<li>启动时添加选项 <code>--protected-mode no</code></li>
<li>绑定地址或者设置认证密码
注意：您只需要执行上述操作之一，服务器就可以开始接受来自外部的连接</li>
</ol>
</blockquote>
<p>其实有用的就 2 和 4 两种方式：</p>
<ol>
<li>
<p>修改配置文件 <code>/etc/redis.conf</code> ，将 <code>protected-mode yes</code> 设置为 <code>no</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected-mode no</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：关闭保护模式后，同时又设置了绑定地址或者认证密码，仍需满足绑定地址和认证密码的条件，才能访问 redis 服务</p>
</li>
<li>
<p>绑定地址或者设置认证密码</p>
</li>
</ol>
<ul>
<li>
<p>绑定地址：不设置，默认均可访问</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># bind 可绑定多个主机地址，类似过滤器的作用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 当配置为 0.0.0.0 时，允许任何主机访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bind 127.0.0.1 # 允许本机访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bind 45.123.77.99 # 允许 45.123.77.99 的主机访问</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="��复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>设置认证密码</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 官方提示：密码应该足够强壮，不然很容易被破解</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 原因是：since Redis is pretty fast -- Redis 非常快，可以以 150k次/s 的速度进行破解</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requirepass idukelu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>注意：即绑定了地址，又设置了认证密码，需要满足两者才能访问 redis 服务</p>]]></content:encoded>
            <category>redis</category>
        </item>
        <item>
            <title><![CDATA[Hexo 插件详解：hexo-renderer-markdown-it]]></title>
            <link>https://idukelu.com/blog/2018/hexo-renderer-markdown-it</link>
            <guid>https://idukelu.com/blog/2018/hexo-renderer-markdown-it</guid>
            <pubDate>Sat, 14 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[简介]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2>
<p><code>hexo-renderer-markdown-it</code> 是一款用于 Markdown 解析和渲染的插件。</p>
<ul>
<li>用于替换 Hexo 默认自带的 Markdown 渲染器。</li>
<li>提供了更丰富的 Markdown 解析和渲染。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装">安装<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E5%AE%89%E8%A3%85" class="hash-link" aria-label="安装的直接链接" title="安装的直接链接">​</a></h2>
<p>注意：请确保你在 Hexo 主目录下进行以下操作。</p>
<ol>
<li>卸载 Hexo 默认自带的 Markdown 渲染器</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm un hexo-renderer-marked --save</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>安装 <code>hexo-renderer-markdown-it</code> 插件</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i hexo-renderer-markdown-it --save</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置">配置<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="配置的直接链接" title="配置的直接链接">​</a></h2>
<p><code>hexo-renderer-markdown-it</code> 的所有配置，均在 Hexo 的主要配置文件 <code>_config.yml</code> 中进行配置。
配置的方式，主要分为：</p>
<ul>
<li>简单配置（支持三种配置级别，开箱即用）</li>
<li>高级配置（更详细的定制，渲染器、插件、锚）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单配置">简单配置<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="简单配置的直接链接" title="简单配置的直接链接">​</a></h3>
<p><code>hexo-renderer-markdown-it</code> 提供三种简单配置方式（配置级别）<code>zero</code>、<code>default</code>、<code>commonmark</code>。
在 Hexo 的 <code>_config.yml</code> 文件中配置以下内容：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Markdown-it config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#markdown: 'zero'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#markdown: 'default'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">markdown: 'commonmark'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>每种简单配置有其默认的一些设置。更多个性化配置，请参考：高级配置。</p>
<ul>
<li>zero：禁用大多数解析器功能。仅支持斜体和粗体，甚至不支持所有原始Markdown功能。</li>
<li>default（GFM）：解析器的行为类似于github规范。</li>
<li>commonmark：提供比Zero预设更多的功能。 此设置将强制插件使用最新的CommonMark规范。</li>
</ul>
<p>警告：选择一种简单配置，将阻止您使用任何附带的插件。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="高级配置">高级配置<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="高级配置的直接链接" title="高级配置的直接链接">​</a></h3>
<p><code>hexo-renderer-markdown-it</code> 提供的高级配置，是对简单配置的详细定制。
在 Hexo 的 <code>_config.yml</code> 文件中配置以下内容（官方提供的完整配置，没有特殊需要不用再次修改）：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Markdown-it config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">markdown:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  render:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    html: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xhtmlOut: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    breaks: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    linkify: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typographer: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quotes: '“”‘’'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugins:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-abbr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-footnote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-ins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-sup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  anchors:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    level: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    collisionSuffix: 'v'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    permalink: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    permalinkClass: header-anchor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    permalinkSymbol: ¶</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="高级配置详解">高级配置详解<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3" class="hash-link" aria-label="高级配置详解的直接��链接" title="高级配置详解的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="渲染器render">渲染器（render）<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E6%B8%B2%E6%9F%93%E5%99%A8render" class="hash-link" aria-label="渲染器（render）的直接链接" title="渲染器（render）的直接链接">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Markdown-it config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">markdown:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  render:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    html: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xhtmlOut: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    breaks: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    linkify: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    typographer: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quotes: '“”‘’'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>html：定义文档中的HTML内容是否应转义或传递给最终结果。</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">html: true # 不转义 HTML 内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">html: false # 转义 HTML 内容，使标签作为文本输出</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>xhtmlOut：定义解析器是否将导出完全兼容XHTML的标记。</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">xhtmlOut: true # 必须使用完全的 XHTML 代码，换行必须为 &lt;br/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xhtmlOut: false # 不必必使用完全的 XHTML 代码，换行可以为 &lt;br&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>breaks：使源文件中的换行符被解析为&lt;br&gt;标记。每次按Enter键都会创建换行符。</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">breaks: true # 每次会车换行相当于一个 &lt;br/&gt; 标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">breaks: false # Pa每次会车换行会被忽略</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>linkify：解析器能够将直接粘贴到文本中的链接内联。</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">linkify: true # 类似链接的文本，作为链接输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linkify: false # 类似链接的文本，依然作为文本输出</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>typographer：可以替换常见的排版元素。</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typographer: true # 替换常见的排版元素</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">typographer: false # 不替换常见的排版元素</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>quotes：单引号、双引号如何被替换</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">quotes: '“”‘’' # 'single'、"double" 变成 ‘single’、“double”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quotes: '«»“”' # 'single'、"double" 变成 “single”、«single»</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="插件plugins">插件（plugins）<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E6%8F%92%E4%BB%B6plugins" class="hash-link" aria-label="插件（plugins）的直接链接" title="插件（plugins）的直接链接">​</a></h4>
<p><code>hexo-renderer-markdown-it</code> 默认集成5个 <code>markdown-it</code> 插件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Markdown-it config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">markdown:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugins:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-abbr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-footnote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-ins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - markdown-it-sup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>markdown-it-abbr：缩写插件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*[HTML]: Hyper Text Markup Language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*[W3C]:  World Wide Web Consortium</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The HTML specification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">is maintained by the W3C.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>markdown-it-footnote：脚注插件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">basic footnote[^1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">here is an inline footnote[^2](inline footnote)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and another one[^3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and another one[^4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[^1]: basic footnote content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[^3]: paragraph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">footnote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[^4]: footnote content with some [markdown](https://en.wikipedia.org/wiki/Markdown)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>markdown-it-ins：插入插件（下划线插件）</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">++inserted++ =&gt; &lt;ins&gt;inserted&lt;/ins&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>markdown-it-sub：下标插件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">H~2~0 =&gt; H&lt;sub&gt;2&lt;/sub&gt;O</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>markdown-it-sup：上标插件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">29^th^ =&gt; 29&lt;sup&gt;th&lt;/sup&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="锚anchors">锚（anchors）<a href="https://idukelu.com/blog/2018/hexo-renderer-markdown-it#%E9%94%9Aanchors" class="hash-link" aria-label="锚（anchors）的直接链接" title="锚（anchors）的直接链接">​</a></h4>
<p>可能自己不会用，因此，没太关注这个功能</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Markdown-it config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">markdown:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  anchors:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    level: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    collisionSuffix: 'v'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    permalink: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    permalinkClass: header-anchor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    permalinkSymbol: ¶</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>level：生成 Heading ID 的标题等级</li>
<li>collisionSuffix：Heading ID 重复时，数字的后缀</li>
<li>permalink：'true'，则创建一个锚标记，除标题外还有一个固定链接</li>
<li>permalinkClass：用于固定链接锚标记的样式</li>
<li>permalinkSymbol：用于固定链接标记的符号</li>
</ul>
<hr>
<p>参考：
<a href="https://github.com/markdown-it" target="_blank" rel="noopener noreferrer">markdown-it of GitHub</a>
<a href="https://github.com/hexojs/hexo-renderer-markdown-it/wiki" target="_blank" rel="noopener noreferrer">hexo-renderer-markdown-it GitHub Wiki</a></p>]]></content:encoded>
            <category>hexo</category>
            <category>hexo-plugin</category>
        </item>
        <item>
            <title><![CDATA[Hexo 表格样式调整]]></title>
            <link>https://idukelu.com/blog/2018/hexo-table-css</link>
            <guid>https://idukelu.com/blog/2018/hexo-table-css</guid>
            <pubDate>Sat, 14 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Markdown 语法中，默认的表格样式为：每列等分，这样不仅影响美观，还会因为某列过长而把表格挤变形]]></description>
            <content:encoded><![CDATA[<p>Markdown 语法中，默认的表格样式为：每列等分，这样不仅影响美观，还会因为某列过长而把表格挤变形
<strong>解决办法</strong>很简单：在 md 文件中添加 css 样式来即可</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table th:nth-of-type(1){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">width: 20%;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table th:nth-of-type(2){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">width: 20%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table th:nth-of-type(3){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">width: 60%;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/style&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*Java Reference Documentation*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| RELEASE | CODENAME | DOCUMENTATION |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| :-: | :-: | :-: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10 | - | [JDK Documentation](https://docs.oracle.com/javase/10/) &amp;emsp;&amp;#124;&amp;emsp; [Java SE API](https://docs.oracle.com/javase/10/docs/api/) &amp;emsp;&amp;#124;&amp;emsp; Java EE API |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>hexo</category>
            <category>hexo-plugin</category>
        </item>
        <item>
            <title><![CDATA[Markdown 备忘录]]></title>
            <link>https://idukelu.com/blog/2018/markdown-memo</link>
            <guid>https://idukelu.com/blog/2018/markdown-memo</guid>
            <pubDate>Sun, 08 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[基础语法]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础语法">基础语法<a href="https://idukelu.com/blog/2018/markdown-memo#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95" class="hash-link" aria-label="基础语法的直接链接" title="基础语法的直接链接">​</a></h2>
<p>基础语法是 John Gruber 的原始设计文档中概述的元素。
所有 Markdown 应用程序都支持这些元素。</p>
<table><thead><tr><th style="text-align:left">元素</th><th style="text-align:left">Markdown 语法</th></tr></thead><tbody><tr><td style="text-align:left">标题</td><td style="text-align:left"># H1<br>## H2<br>### H3</td></tr><tr><td style="text-align:left">粗体</td><td style="text-align:left">**bold text**</td></tr><tr><td style="text-align:left">斜体</td><td style="text-align:left">*italicized text*</td></tr><tr><td style="text-align:left">引用</td><td style="text-align:left">&gt; blockquote</td></tr><tr><td style="text-align:left">代码</td><td style="text-align:left">`code`</td></tr><tr><td style="text-align:left">水平线</td><td style="text-align:left">---</td></tr><tr><td style="text-align:left">有序列表</td><td style="text-align:left">1. First item<br>2. Second item<br>3. Third item</td></tr><tr><td style="text-align:left">无序列表</td><td style="text-align:left">- First item<br>- Second item<br>- Third item</td></tr><tr><td style="text-align:left">链接</td><td style="text-align:left"><code>[title](https://www.example.com)</code></td></tr><tr><td style="text-align:left">图片</td><td style="text-align:left">![alt text](image.jpg)</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="扩展语法">扩展语法<a href="https://idukelu.com/blog/2018/markdown-memo#%E6%89%A9%E5%B1%95%E8%AF%AD%E6%B3%95" class="hash-link" aria-label="扩展语法的直接链接" title="扩展语法的直接链接">​</a></h2>
<p>扩展语法通过添加其他功能扩展了基本语法。
并非所有 Markdown 应用程序都支持这些元素。</p>
<table><thead><tr><th style="text-align:left">元素</th><th style="text-align:left">Markdown 语法</th></tr></thead><tbody><tr><td style="text-align:left">表格</td><td style="text-align:left">| Syntax | Description |<br>| - | - |<br>| Header | Title |</td></tr><tr><td style="text-align:left">代码块</td><td style="text-align:left">``` <br>{<br> "firstName": "John",<br> "lastName": "Smith",<br> "age": 25<br>}<br> ```</td></tr><tr><td style="text-align:left">脚注</td><td style="text-align:left">Here's a sentence with a footnote. [^1] <br> [^1]: This is the footnote.</td></tr><tr><td style="text-align:left">标题 ID</td><td style="text-align:left">### My Great Heading {#custom-id}</td></tr><tr><td style="text-align:left">删除线</td><td style="text-align:left">~~The world is flat.~~</td></tr><tr><td style="text-align:left">任务列表</td><td style="text-align:left">- [x] Write the press release<br>- [ ] Update the website<br>- [ ] Contact the media</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="转义字符">转义字符<a href="https://idukelu.com/blog/2018/markdown-memo#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6" class="hash-link" aria-label="转义字符的直接链接" title="转义字符的直接链接">​</a></h2>
<p>可以用反斜线 <code>\</code> 进行转义的字符</p>
<table><thead><tr><th style="text-align:left">名称</th><th style="text-align:center">字符</th><th style="text-align:left">名称</th><th style="text-align:center">字符</th></tr></thead><tbody><tr><td style="text-align:left">感叹号</td><td style="text-align:center">!</td><td style="text-align:left">刻度</td><td style="text-align:center">`</td></tr><tr><td style="text-align:left">大括号</td><td style="text-align:center">{}</td><td style="text-align:left">井号</td><td style="text-align:center">#</td></tr><tr><td style="text-align:left">中括号</td><td style="text-align:center">[]</td><td style="text-align:left">星号</td><td style="text-align:center">*</td></tr><tr><td style="text-align:left">小括号</td><td style="text-align:center">()</td><td style="text-align:left">加号</td><td style="text-align:center">+</td></tr><tr><td style="text-align:left">反斜线</td><td style="text-align:center">\</td><td style="text-align:left">减号</td><td style="text-align:center">-</td></tr><tr><td style="text-align:left">下划线</td><td style="text-align:center">_</td><td style="text-align:left">点</td><td style="text-align:center">.</td></tr></tbody></table>
<p>不可以用反斜线 <code>\</code> 进行转义的字符</p>
<table><thead><tr><th style="text-align:left">名称</th><th style="text-align:center">字符</th><th style="text-align:center">HTML 转义字符</th><th style="text-align:center">HTML 实体编号</th></tr></thead><tbody><tr><td style="text-align:left">空格</td><td style="text-align:center"></td><td style="text-align:center"><code>&amp;nbsp;</code></td><td style="text-align:center"><code>&amp;#160;</code></td></tr><tr><td style="text-align:left">小于</td><td style="text-align:center"><code>&lt;</code></td><td style="text-align:center"><code>&amp;lt;</code></td><td style="text-align:center"><code>&amp;#60;</code></td></tr><tr><td style="text-align:left">大于</td><td style="text-align:center"><code>&gt;</code></td><td style="text-align:center"><code>&amp;gt;</code></td><td style="text-align:center"><code>&amp;#62;</code></td></tr><tr><td style="text-align:left">双引号</td><td style="text-align:center"><code>"</code></td><td style="text-align:center"><code>&amp;quot;</code></td><td style="text-align:center"><code>&amp;#34;</code></td></tr><tr><td style="text-align:left">单引号</td><td style="text-align:center"><code>'</code></td><td style="text-align:center"><code>&amp;apos;</code></td><td style="text-align:center"><code>&amp;#39;</code></td></tr><tr><td style="text-align:left">和号</td><td style="text-align:center"><code>&amp;</code></td><td style="text-align:center"><code>&amp;amp;</code></td><td style="text-align:center"><code>&amp;#38;</code></td></tr><tr><td style="text-align:left">竖线</td><td style="text-align:center">|</td><td style="text-align:center"></td><td style="text-align:center"><code>&amp;#124;</code></td></tr><tr><td style="text-align:left">波浪线</td><td style="text-align:center">~</td><td style="text-align:center"></td><td style="text-align:center"><code>&amp;#126;</code></td></tr></tbody></table>
<hr>
<p>更多参考：
<a href="https://www.markdownguide.org/cheat-sheet" target="_blank" rel="noopener noreferrer">Markdown Guide/Cheat Sheet</a></p>]]></content:encoded>
            <category>markdown</category>
        </item>
        <item>
            <title><![CDATA[连接 MySQL 报错：2059 - authentication plugin 'caching_sha2_password' cannot be loaded...]]></title>
            <link>https://idukelu.com/blog/2018/mysql-connection-error</link>
            <guid>https://idukelu.com/blog/2018/mysql-connection-error</guid>
            <pubDate>Sun, 08 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[问题]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题<a href="https://idukelu.com/blog/2018/mysql-connection-error#%E9%97%AE%E9%A2%98" class="hash-link" aria-label="问题的直接链接" title="问题的直接链接">​</a></h2>
<p>使用 Navicat 连接 MySQL 数据库时，出现以下报错提示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2059 - authentication plugin 'caching_sha2_password' cannot be loaded...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这个报错，中文意思就是：权限插件 <code>caching_sha2_password</code> 不能被加载</p>
<p>通过查阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/pluggable-authentication.html#pluggable-authentication-compatibility" target="_blank" rel="noopener noreferrer">MySQL 的官方参考文档</a>，我们看到这样的一段描述：</p>
<blockquote>
<ul>
<li>In MySQL 5.7, libmysqlclient uses as its default choice either mysql_native_password or the plugin specified through the MYSQL_DEFAULT_AUTH option for mysql_options().</li>
<li>When a 5.7 client tries to connect to an 8.0 server, the server specifies caching_sha2_password as its default authentication plugin, but the client still sends credential details per either mysql_native_password or whatever is specified through MYSQL_DEFAULT_AUTH.</li>
</ul>
</blockquote>
<p>从这里，我们就明白了：</p>
<ul>
<li>8.0 以前的默认身份验证插件是 <code>mysql_native_password</code></li>
<li>8.0 以后的默认身份验证插件是 <code>caching_sha2_password</code></li>
</ul>
<p>这里会报错的原因在上面也提到了：5.7 的客户端去连接 8.0 的服务端，因为默认的身份验证插件不同，故会造成插件不能加载的错误</p>
<p>说明一下：目前大多数的 MySQL 客户端都还没有升级为 8.0 的认证方式，故像 Navicat、Sequel Pro、SQLyog 等这些常用的连接工具，都有可能出现这个问题</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决">解决<a href="https://idukelu.com/blog/2018/mysql-connection-error#%E8%A7%A3%E5%86%B3" class="hash-link" aria-label="解决的直接链接" title="解决的直接链接">​</a></h2>
<p>将 MySQL 8.0 的身份认证插件改回为 <code>mysql_native_password</code></p>
<ul>
<li>
<p>修改 身份认证插件为 <code>mysql_native_password</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>刷新权限</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FLUSH PRIVILEGES;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>OK，现在再用 Navicat 去连接 MySQL 便可以成功了</p>]]></content:encoded>
            <category>mysql</category>
        </item>
        <item>
            <title><![CDATA[MySQL 8.0 安装（CentOS 7）]]></title>
            <link>https://idukelu.com/blog/2018/mysql-install-centos7</link>
            <guid>https://idukelu.com/blog/2018/mysql-install-centos7</guid>
            <pubDate>Sun, 08 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[下载 MySQL 压缩包并上传服务器]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="下载-mysql-压缩包并上传服务器">下载 MySQL 压缩包并上传服务器<a href="https://idukelu.com/blog/2018/mysql-install-centos7#%E4%B8%8B%E8%BD%BD-mysql-%E5%8E%8B%E7%BC%A9%E5%8C%85%E5%B9%B6%E4%B8%8A%E4%BC%A0%E6%9C%8D%E5%8A%A1%E5%99%A8" class="hash-link" aria-label="下载 MySQL 压缩包并上传服务器的直接链接" title="下载 MySQL 压缩包并上传服务器的直接链接">​</a></h2>
<p>下载地址：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">MySQL :: Download MySQL Community Server</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-mysql">安装 MySQL<a href="https://idukelu.com/blog/2018/mysql-install-centos7#%E5%AE%89%E8%A3%85-mysql" class="hash-link" aria-label="安装 MySQL的直接链接" title="安装 MySQL的直接链接">​</a></h2>
<ol>
<li>为系统创建 MySQL 用户组</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">groupadd mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useradd -r -g mysql -s /bin/false mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>创建 MySQL 安装目录、数据目录</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /usr/local/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /usr/local/mysql/data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>解压 MySQL 压缩包至安装目录</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tar -xvf mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz -C /usr/local/mysql --strip-components 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>进入 MySQL 安装目录，初始化 MySQL （设置 user、basedir、datadir）</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /usr/local/mysql </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./bin/mysqld --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --initialize</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：初始化后，记得记录 MySQL 的初始密码</p>
<ol start="5">
<li>创建 MySQL 命令软链接</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="6">
<li>修改相关配置文件</li>
</ol>
<ul>
<li>修改 <code>/etc/my.conf</code> 配置文件，内容如下：</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[mysqld]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">basedir=/usr/local/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datadir=/usr/local/mysql/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">socket=/var/lib/mysql/mysql.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Disabling symbolic-links is recommended to prevent assorted security risks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">symbolic-links=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Settings user and group are ignored when systemd is used.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># If you need to run mysqld under a different user or group,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># customize your systemd unit file for mariadb according to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># instructions in http://fedoraproject.org/wiki/Systemd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[mysqld_safe]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-error=/var/log/mysql/mysql.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pid-file=/var/run/mysql/mysql.pid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># include all files from the config directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!includedir /etc/my.cnf.d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>拷贝并修改 <code>/etc/init.d/mysqld</code> 文件</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改以下内容：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">basedir=/usr/local/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datadir=/usr/local/mysql/data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="7">
<li>创建 MySQL 日志文件、进程文件，并进行相关赋权
创建 /var/log/mysql/mysql.log 、 /var/run/mysql/mysql.pid</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /var/log/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /var/run/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch /var/log/mysql/mysql.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch /var/run/mysql/mysql.pid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chown -R mysql:mysql /var/log/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chown -R mysql:mysql /var/run/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 750 /var/log/mysql/mysql.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod 750 /var/run/mysql/mysql.pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="8">
<li>为 mysql.sock 文件创建软链接，并为相应文件夹赋权</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chown -R mysql:mysql /var/lib/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到�剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>到这里，MySQL 的安装就完成了，可以启动 MySQL 了，相关命令如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">service mysqld start --启动mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service mysqld stop --关闭mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service mysqld restart --重启mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="对-mysql-进行初始配置">对 MySQL 进行初始配置<a href="https://idukelu.com/blog/2018/mysql-install-centos7#%E5%AF%B9-mysql-%E8%BF%9B%E8%A1%8C%E5%88%9D%E5%A7%8B%E9%85%8D%EF%BF%BD%E7%BD%AE" class="hash-link" aria-label="对 MySQL 进行初始配置的直接链接" title="对 MySQL 进行初始配置的直接链接">​</a></h2>
<ol>
<li>登陆 mysql，用到初始化时记录的密码</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -uroot -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>修改 root 用户密码为： root</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>开启远程访问</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GRANT ALL ON *.* TO 'root'@'%';</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>报错：创建一个 root 用户，并开启远程访问</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE USER 'root'@'%' IDENTIFIED BY 'root'; --创建root用户，host为%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>将刚刚创建的 root 用户，密码修改为：root</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>刷新权限</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FLUSH PRIVILEGES;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="防火墙设置">防火墙设置<a href="https://idukelu.com/blog/2018/mysql-install-centos7#%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE" class="hash-link" aria-label="防火墙设置的直接链接" title="防火墙设置的直接链接">​</a></h2>
<ul>
<li>内网环境，可以直接考虑关闭防火墙</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop firewalld.service --关闭防火墙</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>外网环境，建议开启 3306 端口即可</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd —zone=public —add-port=3306/tcp —permanent -—添加3306端口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">firewall-cmd —reload --重启防火墙规则</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p>参考：<a href="https://blog.csdn.net/baidu_27055141/article/details/80974701" target="_blank" rel="noopener noreferrer">Centos7安装Mysql8.0.11 - baidu_27055141的博客 - CSDN博客</a></p>]]></content:encoded>
            <category>markdown</category>
        </item>
        <item>
            <title><![CDATA[常用参考文档]]></title>
            <link>https://idukelu.com/blog/2018/reference-documentation</link>
            <guid>https://idukelu.com/blog/2018/reference-documentation</guid>
            <pubDate>Sat, 07 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Java 官方参考文档]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-官方参考文档">Java 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#java-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="Java 官方参考文档的直接链接" title="Java 官方参考文档的直接链接">​</a></h2>
<p><em>Java Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">CODENAME</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center">12</td><td style="text-align:center">-</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/12/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/en/java/javase/12/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  Java EE API</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">-</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/11/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/en/java/javase/11/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  Java EE API</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">-</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/10/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/10/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  Java EE API</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">-</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/9/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/9/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  Java EE API</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">Spider</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/8/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/8/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  <a href="https://javaee.github.io/javaee-spec/javadocs/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">Dolphin</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/7/docs/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/7/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  <a href="https://docs.oracle.com/javaee/7/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">Mustang</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/6/docs/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/6/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  <a href="https://docs.oracle.com/javaee/6/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">Tiger</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/5/docs/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/5/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  <a href="https://docs.oracle.com/javaee/5/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">1.4</td><td style="text-align:center">Merlin</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/1.4/docs/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/1.4/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  <a href="https://docs.oracle.com/javaee/1.4/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">1.3</td><td style="text-align:center">Kestrel</td><td style="text-align:center"><a href="https://docs.oracle.com/javase/1.3/docs/" target="_blank" rel="noopener noreferrer">JDK Documentation</a>  |  <a href="https://docs.oracle.com/javase/1.3/docs/api/" target="_blank" rel="noopener noreferrer">Java SE API</a>  |  <a href="https://docs.oracle.com/javaee/1.3/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">1.2</td><td style="text-align:center">Playground</td><td style="text-align:center">JDK Documentation  |  Java SE API  |  <a href="https://docs.oracle.com/javaee/1.2/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">1.1</td><td style="text-align:center">-</td><td style="text-align:center">JDK Documentation  |  Java SE API  |  <a href="https://docs.oracle.com/javaee/1.2/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">1.0</td><td style="text-align:center">Oak</td><td style="text-align:center">JDK Documentation  |  Java SE API  |  <a href="https://docs.oracle.com/javaee/1.2/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr><tr><td style="text-align:center">Beta</td><td style="text-align:center">-</td><td style="text-align:center">JDK Documentation  |  Java SE API  |  <a href="https://docs.oracle.com/javaee/1.2/api/" target="_blank" rel="noopener noreferrer">Java EE API</a></td></tr></tbody></table>
<p>more details: <a href="http://www.oracle.com/technetwork/java/index.html" target="_blank" rel="noopener noreferrer">http://www.oracle.com/technetwork/java/index.html</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-framework-官方参考文档">Spring Framework 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#spring-framework-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="Spring Framework 官方参考文档的直接链接" title="Spring Framework 官方参考文档的直接链接">​</a></h2>
<p><em>Spring Framework Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center">5.1.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/5.1.x/spring-framework-reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/5.1.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">5.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/5.0.x/spring-framework-reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/5.0.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">4.3.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/4.3.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">4.2.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/4.2.x/spring-framework-reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/4.2.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">4.1.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/4.1.x/spring-framework-reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/4.1.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">4.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/4.0.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">3.2.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/3.2.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">3.1.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/3.1.x/spring-framework-reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/3.1.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">3.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/3.0.x/reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/3.0.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">2.5.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/2.5.x/reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/2.5.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">2.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/2.0.x/reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/2.0.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.2.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/1.2.x/reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/1.2.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.1.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/1.1.x/reference/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-framework/docs/1.1.x/javadoc-api/" target="_blank" rel="noopener noreferrer">API</a></td></tr></tbody></table>
<p>more details: <a href="https://projects.spring.io/spring-framework/index.html" target="_blank" rel="noopener noreferrer">https://projects.spring.io/spring-framework/index.html</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot-官方参考文档">Spring Boot 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#spring-boot-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="Spring Boot 官方参考文档的直接链接" title="Spring Boot 官方参考文档的直接链接">​</a></h2>
<p><em>Spring Boot Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center">2.2.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/2.2.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">2.1.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/2.1.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/2.1.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">2.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/2.0.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/2.0.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.5.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/1.5.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/1.5.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.4.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/1.4.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/1.4.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.3.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/1.3.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/1.3.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.2.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/1.2.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/1.2.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.1.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/1.1.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/1.1.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">1.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/1.0.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/1.0.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">0.5.x</td><td style="text-align:center">Reference  |  <a href="https://docs.spring.io/spring-boot/docs/0.5.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr><tr><td style="text-align:center">0.0.x</td><td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/0.0.x/reference/html/" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://docs.spring.io/spring-boot/docs/0.0.x/api/" target="_blank" rel="noopener noreferrer">API</a></td></tr></tbody></table>
<p>more details: <a href="https://projects.spring.io/spring-boot/index.html" target="_blank" rel="noopener noreferrer">https://projects.spring.io/spring-boot/index.html</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-cloud-官方参考文档">Spring Cloud 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#spring-cloud-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="Spring Cloud 官方参考文档的直接链接" title="Spring Cloud 官方参考文档的直接链接">​</a></h2>
<p><em>Spring Cloud Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center">Hoxton</td><td style="text-align:center">Reference  |  API</td></tr><tr><td style="text-align:center">Greenwich</td><td style="text-align:center"><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/multi/multi_spring-cloud.html" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr><tr><td style="text-align:center">Finchley</td><td style="text-align:center"><a href="http://cloud.spring.io/spring-cloud-static/Finchley.SR4/multi/multi_spring-cloud.html" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr><tr><td style="text-align:center">Edgware</td><td style="text-align:center"><a href="http://cloud.spring.io/spring-cloud-static/Edgware.SR6/multi/multi_spring-cloud.html" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr><tr><td style="text-align:center">Dalston</td><td style="text-align:center"><a href="http://cloud.spring.io/spring-cloud-static/Dalston.SR5/multi/multi_spring-cloud.html" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr><tr><td style="text-align:center">Camden</td><td style="text-align:center"><a href="http://cloud.spring.io/spring-cloud-static/Camden.SR7/" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr><tr><td style="text-align:center">Brixton</td><td style="text-align:center"><a href="http://cloud.spring.io/spring-cloud-static/Brixton.SR7/" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr><tr><td style="text-align:center">Angle</td><td style="text-align:center">Reference  |  API</td></tr></tbody></table>
<p>more details: <a href="https://projects.spring.io/spring-cloud/index.html" target="_blank" rel="noopener noreferrer">https://projects.spring.io/spring-cloud/index.html</a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mybatis-官方参考文档">MyBatis 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#mybatis-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="MyBatis 官方参考文档的直接链接" title="MyBatis 官方参考文档的直接链接">​</a></h2>
<p><em>MyBatis Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center">3.x</td><td style="text-align:center"><a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener noreferrer">Reference</a>  |  API</td></tr></tbody></table>
<p>more details: <a href="http://blog.mybatis.org/" target="_blank" rel="noopener noreferrer">http://blog.mybatis.org</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-官方参考文档">MySQL 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#mysql-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="MySQL 官方参考文档的直接链接" title="MySQL 官方参考文档的直接链接">​</a></h2>
<p><em>MySQL Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center">8.0</td><td style="text-align:center"><a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" rel="noopener noreferrer">MySQL Reference Manual</a>  |  <a href="https://dev.mysql.com/doc/relnotes/mysql/8.0/en/" target="_blank" rel="noopener noreferrer">MySQL Release Notes</a></td></tr><tr><td style="text-align:center">5.7</td><td style="text-align:center"><a href="https://dev.mysql.com/doc/refman/5.7/en/" target="_blank" rel="noopener noreferrer">MySQL Reference Manual</a>  |  <a href="https://dev.mysql.com/doc/relnotes/mysql/8.0/en/" target="_blank" rel="noopener noreferrer">MySQL Release Notes</a></td></tr><tr><td style="text-align:center">5.6</td><td style="text-align:center"><a href="https://dev.mysql.com/doc/refman/5.6/en/" target="_blank" rel="noopener noreferrer">MySQL Reference Manual</a>  |  <a href="https://dev.mysql.com/doc/relnotes/mysql/5.6/en/" target="_blank" rel="noopener noreferrer">MySQL Release Notes</a></td></tr><tr><td style="text-align:center">5.5</td><td style="text-align:center"><a href="https://dev.mysql.com/doc/refman/5.5/en/" target="_blank" rel="noopener noreferrer">MySQL Reference Manual</a>  |  <a href="https://dev.mysql.com/doc/relnotes/mysql/5.5/en/" target="_blank" rel="noopener noreferrer">MySQL Release Notes</a></td></tr></tbody></table>
<p>more details: <a href="https://dev.mysql.com/doc/" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="git-官方参考文档">Git 官方参考文档<a href="https://idukelu.com/blog/2018/reference-documentation#git-%E5%AE%98%E6%96%B9%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3" class="hash-link" aria-label="Git 官方参考文档的直接链接" title="Git 官方参考文档的直接链接">​</a></h2>
<p><em>Git Reference Documentation</em></p>
<table><thead><tr><th style="text-align:center">RELEASE</th><th style="text-align:center">DOCUMENTATION</th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center"><a href="https://git-scm.com/docs" target="_blank" rel="noopener noreferrer">Reference</a>  |  <a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener noreferrer">BOOK</a></td></tr></tbody></table>
<p>more details: <a href="https://git-scm.com/doc" target="_blank" rel="noopener noreferrer">https://git-scm.com/doc</a></p>]]></content:encoded>
        </item>
    </channel>
</rss>